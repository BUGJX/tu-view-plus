"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),U=require("lodash-unified"),E=require("./input.js"),W=require("../../icon/index.js"),i=require("@tu-view-plus/hooks"),G=require("./use-input.js");require("../../form/index.js");require("../style/input.css");const N=require("../../form/src/hooks/use-form-props.js"),g=require("../../form/src/hooks/use-form-item.js"),H=["role"],J=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Q=e.defineComponent({name:"TuInput"}),X=e.defineComponent({...Q,props:E.inputProps,emits:E.inputEmits,setup(q,{emit:z}){const s=q,F=e.useSlots(),r=i.useNamespace("input"),p=i.useNamespace("input-group"),d=N.useFormSize(),u=N.useFormDisabled(),P=e.computed(()=>s.showPassword?M?"text":"password":s.type),m=i.useComponentAttrs({excludeKeys:e.computed(()=>Object.keys(h.value))}),{form:a,formItem:l}=g.useFormItem(),{inputId:x}=g.useFormItemInputId(s,{formItemContext:l}),{isHovering:A,isFocused:f,isPasswordVisible:M,focus:c,handleMouseEnter:v,handleMouseLeave:C,handleCompositionStart:y,handleCompositionUpdate:b,handleCompositionEnd:k,handleInput:w,handleFocus:I,handleBlur:S,handleChange:B,handleKeydown:V}=G.default(s,z),$=e.computed(()=>U.isNil(s.modelValue)?"":String(s.modelValue)),D=e.computed(()=>(l==null?void 0:l.validateState)||""),T=e.computed(()=>(a==null?void 0:a.statusIcon)??!1),K=e.computed(()=>s.clearable&&!u.value&&!s.readonly&&$.value&&(f.value||A.value)),L=e.computed(()=>s.showWordLimit&&m.value.maxlength&&s.type==="text"&&!u.value&&!s.readonly&&!s.showPassword),j=e.computed(()=>F.suffix||s.suffixIcon||K.value||s.showPassword||L.value||D.value&&T.value),O=e.computed(()=>({[r.b()]:!0,[r.m(d.value)]:d.value,[r.is("disabled")]:u.value})),R=e.computed(()=>[e.useAttrs().style,s.inputStyle]),h=e.computed(()=>{const n={};return s.containerRole==="combobox"&&(n["aria-haspopup"]=e.useAttrs()["aria-haspopup"],n["aria-owns"]=e.useAttrs()["aria-owns"],n["aria-expanded"]=e.useAttrs()["aria-expanded"]),n});return(n,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",e.mergeProps(e.unref(h),{class:e.unref(O),style:e.unref(R),role:n.containerRole,onMouseenter:o[9]||(o[9]=(...t)=>e.unref(v)&&e.unref(v)(...t)),onMouseleave:o[10]||(o[10]=(...t)=>e.unref(C)&&e.unref(C)(...t))}),[n.$slots.prepend?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(p).e("prepend"))},[e.renderSlot(n.$slots,"prepend")],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(r).e("wrapper"),{[e.unref(r).is("focus")]:e.unref(f)}])},[n.$slots.prefix||n.prefixIcon?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(r).e("prefix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(r).e("prefix-inner")),onClick:o[0]||(o[0]=(...t)=>e.unref(c)&&e.unref(c)(...t))},[e.renderSlot(n.$slots,"prefix"),n.prefixIcon?(e.openBlock(),e.createBlock(e.unref(W.TuIcon),{key:0,class:e.normalizeClass(e.unref(r).e("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.prefixIcon)))]),_:1},8,["class"])):e.createCommentVNode("",!0)],2)],2)):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({ref:"input"},e.unref(m),{id:e.unref(x),class:e.unref(r).e("inner"),type:e.unref(P),disabled:e.unref(u),formatter:n.formatter,parser:n.parser,readonly:n.readonly,autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-label":n.label,placeholder:n.placeholder,style:n.inputStyle,form:s.form,onCompositionstart:o[1]||(o[1]=(...t)=>e.unref(y)&&e.unref(y)(...t)),onCompositionupdate:o[2]||(o[2]=(...t)=>e.unref(b)&&e.unref(b)(...t)),onCompositionend:o[3]||(o[3]=(...t)=>e.unref(k)&&e.unref(k)(...t)),onInput:o[4]||(o[4]=(...t)=>e.unref(w)&&e.unref(w)(...t)),onFocus:o[5]||(o[5]=(...t)=>e.unref(I)&&e.unref(I)(...t)),onBlur:o[6]||(o[6]=(...t)=>e.unref(S)&&e.unref(S)(...t)),onChange:o[7]||(o[7]=(...t)=>e.unref(B)&&e.unref(B)(...t)),onKeydown:o[8]||(o[8]=(...t)=>e.unref(V)&&e.unref(V)(...t))}),null,16,J),e.unref(j)?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(r).e("suffix"))},null,2)):e.createCommentVNode("",!0)],2),n.$slots.append?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(p).e("append"))},[e.renderSlot(n.$slots,"append")],2)):e.createCommentVNode("",!0)],16,H)),[[e.vShow,n.type!=="hidden"]])}});exports.default=X;
