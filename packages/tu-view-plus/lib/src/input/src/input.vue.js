"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),F=require("./input.js"),f=require("../../icon/index.js"),m=require("@tu-view-plus/hooks"),c=require("@tu-view-plus/icons-vue");require("../../form/index.js");const Q=require("./use-input.js");require("../style/input.css");const x=require("../../form/src/hooks/use-form-props.js"),M=require("../../form/src/hooks/use-form-item.js"),X=["role"],Y=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Z=e.defineComponent({name:"TuInput"}),_=e.defineComponent({...Z,props:F.inputProps,emits:F.inputEmits,setup(A,{emit:$}){const s=A,C=e.shallowRef(),T=e.useSlots(),t=m.useNamespace("input"),k=m.useNamespace("input-group"),v=x.useFormSize(),u=x.useFormDisabled(),y=m.useComponentAttrs({excludeKeys:e.computed(()=>Object.keys(g.value))}),{form:i,formItem:l}=M.useFormItem(),{inputId:D}=M.useFormItemInputId(s,{formItemContext:l}),{isHovering:K,isFocused:p,isPasswordVisible:w,nativeInputValue:d,focus:a,handleClear:L,handleMouseEnter:b,handleMouseLeave:B,handleCompositionStart:I,handleCompositionUpdate:V,handleCompositionEnd:S,handleInput:h,handleFocus:N,handleBlur:z,handleChange:E,handleKeydown:P,handlePasswordVisible:R}=Q.default(s,$,C),j=e.computed(()=>(l==null?void 0:l.validateState)||""),H=e.computed(()=>(i==null?void 0:i.statusIcon)??!1),q=e.computed(()=>s.clearable&&!u.value&&!s.readonly&&!!d.value&&(p.value||K.value)),O=e.computed(()=>s.showPassword&&!u.value&&!s.readonly&&!!d.value&&(!!d.value||p.value)),W=e.computed(()=>s.showWordLimit&&!!y.value.maxlength&&s.type==="text"&&!u.value&&!s.readonly&&!s.showPassword),G=e.computed(()=>!!T.suffix||!!s.suffixIcon||q.value||s.showPassword||W.value||!!j.value&&H.value),U=e.computed(()=>({[t.b()]:!0,[t.m(v.value)]:v.value,[t.is("disabled")]:u.value})),J=e.computed(()=>[e.useAttrs().style,s.inputStyle]),g=e.computed(()=>{const n={};return s.containerRole==="combobox"&&(n["aria-haspopup"]=e.useAttrs()["aria-haspopup"],n["aria-owns"]=e.useAttrs()["aria-owns"],n["aria-expanded"]=e.useAttrs()["aria-expanded"]),n});return(n,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",e.mergeProps(e.unref(g),{class:e.unref(U),style:e.unref(J),role:n.containerRole,onMouseenter:o[11]||(o[11]=(...r)=>e.unref(b)&&e.unref(b)(...r)),onMouseleave:o[12]||(o[12]=(...r)=>e.unref(B)&&e.unref(B)(...r))}),[n.$slots.prepend?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(k).e("prepend"))},[e.renderSlot(n.$slots,"prepend")],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(t).e("wrapper"),{[e.unref(t).is("focus")]:e.unref(p)}])},[n.$slots.prefix||n.prefixIcon?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(t).e("prefix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(t).e("prefix-inner")),onClick:o[0]||(o[0]=(...r)=>e.unref(a)&&e.unref(a)(...r))},[e.renderSlot(n.$slots,"prefix"),n.prefixIcon?(e.openBlock(),e.createBlock(e.unref(f.TuIcon),{key:0,class:e.normalizeClass(e.unref(t).e("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.prefixIcon)))]),_:1},8,["class"])):e.createCommentVNode("",!0)],2)],2)):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({ref_key:"input",ref:C},e.unref(y),{id:e.unref(D),class:e.unref(t).e("inner"),type:n.showPassword?e.unref(w)?"text":"password":n.type,disabled:e.unref(u),formatter:n.formatter,parser:n.parser,readonly:n.readonly,autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-label":n.label,placeholder:n.placeholder,style:n.inputStyle,form:s.form,onCompositionstart:o[1]||(o[1]=(...r)=>e.unref(I)&&e.unref(I)(...r)),onCompositionupdate:o[2]||(o[2]=(...r)=>e.unref(V)&&e.unref(V)(...r)),onCompositionend:o[3]||(o[3]=(...r)=>e.unref(S)&&e.unref(S)(...r)),onInput:o[4]||(o[4]=(...r)=>e.unref(h)&&e.unref(h)(...r)),onFocus:o[5]||(o[5]=(...r)=>e.unref(N)&&e.unref(N)(...r)),onBlur:o[6]||(o[6]=(...r)=>e.unref(z)&&e.unref(z)(...r)),onChange:o[7]||(o[7]=(...r)=>e.unref(E)&&e.unref(E)(...r)),onKeydown:o[8]||(o[8]=(...r)=>e.unref(P)&&e.unref(P)(...r))}),null,16,Y),e.unref(G)?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(t).e("suffix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(t).e("suffix-inner")),onClick:o[10]||(o[10]=(...r)=>e.unref(a)&&e.unref(a)(...r))},[e.unref(q)?(e.openBlock(),e.createBlock(e.unref(f.TuIcon),{key:0,class:e.normalizeClass([e.unref(t).e("icon"),e.unref(t).em("icon","clear")]),onMousedown:o[9]||(o[9]=e.withModifiers(()=>{},["prevent"])),onClick:e.unref(L)},{default:e.withCtx(()=>[e.createVNode(e.unref(c.Close))]),_:1},8,["class","onClick"])):e.createCommentVNode("",!0),e.unref(O)?(e.openBlock(),e.createBlock(e.unref(f.TuIcon),{key:1,class:e.normalizeClass([e.unref(t).e("icon"),e.unref(t).em("icon","password")]),onClick:e.unref(R)},{default:e.withCtx(()=>[e.unref(w)?(e.openBlock(),e.createBlock(e.unref(c.View),{key:0})):(e.openBlock(),e.createBlock(e.unref(c.Hide),{key:1}))]),_:1},8,["class","onClick"])):e.createCommentVNode("",!0)],2)],2)):e.createCommentVNode("",!0)],2),n.$slots.append?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(k).e("append"))},[e.renderSlot(n.$slots,"append")],2)):e.createCommentVNode("",!0)],16,X)),[[e.vShow,n.type!=="hidden"]])}});exports.default=_;
