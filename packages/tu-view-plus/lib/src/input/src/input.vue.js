"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),R=require("./input.js"),d=require("../../icon/index.js"),w=require("@tu-view-plus/hooks"),K=require("@tu-view-plus/utils"),I=require("@tu-view-plus/icons-vue");require("../../form/index.js");const re=require("./use-input.js");require("../style/input.css");const W=require("../../form/src/hooks/use-form-props.js"),j=require("../../form/src/hooks/use-form-item.js"),le=["role"],ae=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],ue=e.defineComponent({name:"TuInput",inheritAttrs:!1}),ie=e.defineComponent({...ue,props:R.inputProps,emits:R.inputEmits,setup(H,{expose:O,emit:G}){const v=e.shallowRef(),r=H,U=G,l=e.useSlots(),s=w.useNamespace("input"),a=w.useNamespace("input-group"),b=W.useFormSize(),u=W.useFormDisabled(),c=w.useComponentAttrs({excludeKeys:e.computed(()=>Object.keys(L.value))}),{form:k,formItem:m}=j.useFormItem(),{inputId:J}=j.useFormItemInputId(r,{formItemContext:m}),{inputRef:Q,isHovering:X,isFocused:C,isPasswordVisible:V,textLength:h,nativeInputValue:y,focus:i,blur:Y,select:Z,clear:N,handleMouseEnter:S,handleMouseLeave:g,handleCompositionStart:x,handleCompositionUpdate:z,handleCompositionEnd:E,handleInput:P,handleFocus:q,handleBlur:A,handleChange:F,handleKeydown:M,handlePasswordVisible:_,setNativeInputValue:ee}=re.default(r,U,v),p=e.computed(()=>(m==null?void 0:m.validateState)||""),D=e.computed(()=>(k==null?void 0:k.statusIcon)??!1),T=e.computed(()=>p.value&&K.ValidateComponentsMap[p.value]),ne=e.computed(()=>!!f.value&&h.value>Number(c.value.maxlength)),B=e.computed(()=>r.allowClear&&!u.value&&!r.readonly&&!!y.value&&(C.value||X.value)),$=e.computed(()=>r.showPassword&&!u.value&&!r.readonly&&!!y.value&&(!!y.value||C.value)),f=e.computed(()=>r.showWordLimit&&!!c.value.maxlength&&r.type==="text"&&!u.value&&!r.readonly&&!r.showPassword),oe=e.computed(()=>!!l.suffix||!!r.suffixIcon||B.value||r.showPassword||f.value||!!p.value&&D.value),te=e.computed(()=>({[s.b()]:!0,[s.m(b.value)]:b.value,[s.is("disabled")]:u.value,[s.is("exceed")]:ne.value,[a.b()]:l.prepend||l.append,[a.m("prepend")]:l.prepend,[a.m("append")]:l.append,[e.useAttrs().class]:e.useAttrs().class})),se=e.computed(()=>[e.useAttrs().style,r.inputStyle]),L=e.computed(()=>{const n={};return r.containerRole==="combobox"&&(n["aria-haspopup"]=e.useAttrs()["aria-haspopup"],n["aria-owns"]=e.useAttrs()["aria-owns"],n["aria-expanded"]=e.useAttrs()["aria-expanded"]),n});return e.onMounted(()=>{!r.formatter&&r.parser&&K.debugWarn("TuInput","If you set the parser, you also need to set the formatter."),ee()}),O({input:v,ref:Q,focus:i,blur:Y,select:Z,clear:N}),(n,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",e.mergeProps(L.value,{class:te.value,style:se.value,role:n.containerRole,onMouseenter:o[11]||(o[11]=(...t)=>e.unref(S)&&e.unref(S)(...t)),onMouseleave:o[12]||(o[12]=(...t)=>e.unref(g)&&e.unref(g)(...t))}),[n.$slots.prepend?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(a).e("prepend"))},[e.renderSlot(n.$slots,"prepend")],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(s).e("wrapper"),{[e.unref(s).is("focus")]:e.unref(C)}])},[n.$slots.prefix||n.prefixIcon?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(s).e("prefix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(s).e("prefix-inner")),onClick:o[0]||(o[0]=(...t)=>e.unref(i)&&e.unref(i)(...t))},[e.renderSlot(n.$slots,"prefix"),n.prefixIcon?(e.openBlock(),e.createBlock(e.unref(d.TuIcon),{key:0,class:e.normalizeClass(e.unref(s).e("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.prefixIcon)))]),_:1},8,["class"])):e.createCommentVNode("",!0)],2)],2)):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({ref_key:"input",ref:v},e.unref(c),{id:e.unref(J),class:e.unref(s).e("inner"),type:n.showPassword?e.unref(V)?"text":"password":n.type,disabled:e.unref(u),formatter:n.formatter,parser:n.parser,readonly:n.readonly,autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-label":n.label,placeholder:n.placeholder,style:n.inputStyle,onCompositionstart:o[1]||(o[1]=(...t)=>e.unref(x)&&e.unref(x)(...t)),onCompositionupdate:o[2]||(o[2]=(...t)=>e.unref(z)&&e.unref(z)(...t)),onCompositionend:o[3]||(o[3]=(...t)=>e.unref(E)&&e.unref(E)(...t)),onInput:o[4]||(o[4]=(...t)=>e.unref(P)&&e.unref(P)(...t)),onFocus:o[5]||(o[5]=(...t)=>e.unref(q)&&e.unref(q)(...t)),onBlur:o[6]||(o[6]=(...t)=>e.unref(A)&&e.unref(A)(...t)),onChange:o[7]||(o[7]=(...t)=>e.unref(F)&&e.unref(F)(...t)),onKeydown:o[8]||(o[8]=(...t)=>e.unref(M)&&e.unref(M)(...t))}),null,16,ae),oe.value?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(s).e("suffix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(s).e("suffix-inner")),onClick:o[10]||(o[10]=(...t)=>e.unref(i)&&e.unref(i)(...t))},[!B.value||!$.value||!f.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(n.$slots,"suffix"),n.suffixIcon?(e.openBlock(),e.createBlock(e.unref(d.TuIcon),{key:0,class:e.normalizeClass(e.unref(s).e("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.suffixIcon)))]),_:1},8,["class"])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),B.value?(e.openBlock(),e.createBlock(e.unref(d.TuIcon),{key:1,class:e.normalizeClass([e.unref(s).e("icon"),e.unref(s).em("icon","clear")]),onMousedown:o[9]||(o[9]=e.withModifiers(()=>{},["prevent"])),onClick:e.unref(N)},{default:e.withCtx(()=>[e.createVNode(e.unref(I.Close))]),_:1},8,["class","onClick"])):e.createCommentVNode("",!0),$.value?(e.openBlock(),e.createBlock(e.unref(d.TuIcon),{key:2,class:e.normalizeClass([e.unref(s).e("icon"),e.unref(s).em("icon","password")]),onClick:e.unref(_)},{default:e.withCtx(()=>[e.unref(V)?(e.openBlock(),e.createBlock(e.unref(I.View),{key:0})):(e.openBlock(),e.createBlock(e.unref(I.Hide),{key:1}))]),_:1},8,["class","onClick"])):e.createCommentVNode("",!0),f.value?(e.openBlock(),e.createElementBlock("span",{key:3,class:e.normalizeClass(e.unref(s).e("count"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(s).e("count-inner"))},e.toDisplayString(e.unref(h))+" / "+e.toDisplayString(e.unref(c).maxlength),3)],2)):e.createCommentVNode("",!0),p.value&&T.value&&D.value?(e.openBlock(),e.createBlock(e.unref(d.TuIcon),{key:4,class:e.normalizeClass([e.unref(s).e("icon"),e.unref(s).e("validateIcon"),e.unref(s).is("loading",p.value==="validating")])},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(T.value)))]),_:1},8,["class"])):e.createCommentVNode("",!0)],2)],2)):e.createCommentVNode("",!0)],2),n.$slots.append?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(a).e("append"))},[e.renderSlot(n.$slots,"append")],2)):e.createCommentVNode("",!0)],16,le)),[[e.vShow,n.type!=="hidden"]])}});exports.default=ie;
