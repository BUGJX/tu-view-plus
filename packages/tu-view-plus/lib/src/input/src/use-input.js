"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue");require("../../form/index.js");const F=require("@tu-view-plus/utils"),g=require("@tu-view-plus/constants"),N=require("lodash-unified"),S=require("../../form/src/hooks/use-form-item.js");function U(u,a,E){const c=t.ref(!1),r=t.ref(!1),l=t.ref(!1),i=t.ref(!1),v=t.computed(()=>E.value),s=t.computed(()=>N.isNil(u.modelValue)?"":String(u.modelValue)),{formItem:o}=S.useFormItem(),f=async()=>{var e;await t.nextTick(),(e=v.value)==null||e.focus()},V=()=>{a(g.UPDATE_MODEL_EVENT,""),a("change",""),a("clear"),a("input","")},p=e=>{c.value=!0,a("mouseenter",e)},b=e=>{c.value=!1,a("mouseleave",e)},w=e=>{a("compositionstart",e),l.value=!0},T=e=>{a("compositionupdate",e)},q=e=>{a("compositionend",e),l.value&&(l.value=!1,h(e))},h=async e=>{let{value:n}=e.target;if(u.formatter&&(n=u.parser?u.parser(n):n),!l.value){if(n===s.value){d();return}a(g.UPDATE_MODEL_EVENT,n),a("input",n),await t.nextTick(),d()}},C=e=>{r.value=!0,a("focus",e)},M=e=>{var n;r.value=!1,a("blur",e),u.validateEvent&&((n=o==null?void 0:o.validate)==null||n.call(o,"blur").catch(D=>F.debugWarn(D)))},_=e=>{a("change",e.target.value)},y=e=>{a("keydown",e)},P=()=>{i.value=!i.value,f()},d=()=>{const e=v.value,n=u.formatter?u.formatter(s.value):s.value;!e||e.value===n||(e.value=n)};return t.watch(s,()=>d()),{isHovering:c,isFocused:r,isPasswordVisible:i,nativeInputValue:s,focus:f,handleClear:V,handleMouseEnter:p,handleMouseLeave:b,handleCompositionStart:w,handleCompositionUpdate:T,handleCompositionEnd:q,handleInput:h,handleFocus:C,handleBlur:M,handleChange:_,handleKeydown:y,handlePasswordVisible:P}}exports.default=U;
