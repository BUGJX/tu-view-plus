"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),M=require("./select-option.js"),_=require("@tu-view-plus/hooks"),m=require("./utils.js"),g=require("./context.js"),N=e.defineComponent({name:"TuSelectOption"}),q=e.defineComponent({...N,props:M.selectOptionProps,setup(v){const s=v,k=e.useSlots(),i=_.useNamespace("select"),{disabled:d,index:y}=e.toRefs(s),t=e.getCurrentInstance(),o=e.inject(g.selectInjectionKey,void 0),a=e.ref(),u=e.ref("");let p=e.ref(!0);const r=e.computed(()=>s.value??s.label??u.value),c=e.computed(()=>s.label??u.value),l=e.computed(()=>m.getKeyFromValue(r.value,o==null?void 0:o.valueKey)),S=e.computed(()=>(o==null?void 0:o.component)??"li"),b=e.computed(()=>(o==null?void 0:o.valueKeys.includes(l.value))??!1),h=e.computed(()=>(o==null?void 0:o.activeKey)===l.value),V=e.computed(()=>({[i.e("option")]:!0,[i.is("active")]:h.value,[i.is("disabled")]:s.disabled,[i.is("multiple")]:o==null?void 0:o.multiple,[i.is("selected")]:b.value,[i.is("has-suffix")]:k.suffix})),B=n=>{s.disabled||o==null||o.onSelect(l.value,n)},O=()=>{s.disabled||o==null||o.setActiveKey(l.value)},K=()=>{s.disabled||o==null||o.setActiveKey()},f=()=>{if(!s.label&&a.value){const n=a.value.textContent??"";u.value!==n&&(u.value=n)}};if(!s.internal){const n=e.reactive({raw:{value:r,label:c,disabled:d},ref:a,index:y,key:l,origin:"slot",value:r,label:c,disabled:d});p=e.computed(()=>m.isValidOption(n,{inputValue:o==null?void 0:o.inputValue,filterOption:o==null?void 0:o.filterOption})),t&&(o==null||o.addSlotOptionInfo(t.uid,n)),e.onBeforeUnmount(()=>{t&&(o==null||o.removeSlotOptionInfo(t.uid))})}return e.onMounted(()=>f()),e.onUpdated(()=>f()),(n,z)=>e.withDirectives((e.openBlock(),e.createBlock(e.resolveDynamicComponent(S.value),{ref_key:"itemRef",ref:a,class:e.normalizeClass(V.value),onClick:B,onMouseenter:O,onMouseleave:K},{default:e.withCtx(()=>[n.$slots.icon?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(i).e("option-icon"))},[e.renderSlot(n.$slots,"icon")],2)):e.createCommentVNode("",!0),e.unref(o)&&e.unref(o).multiple?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(i).e("option-check"))},null,2)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:e.normalizeClass(e.unref(i).e("option-content"))},[e.renderSlot(n.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(c.value),1)])],2),n.$slots.suffix?(e.openBlock(),e.createElementBlock("span",{key:2,class:e.normalizeClass(e.unref(i).e("option-suffix"))},[e.renderSlot(n.$slots,"suffix")],2)):e.createCommentVNode("",!0)]),_:3},40,["class"])),[[e.vShow,e.unref(p)]])}});exports.default=q;
