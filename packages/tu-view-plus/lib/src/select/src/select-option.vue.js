"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),K=require("./select-option.js"),M=require("@tu-view-plus/hooks"),v=require("./utils.js"),_=require("./context.js"),$=require("../../checkbox/index.js"),q=e.defineComponent({name:"TuSelectOption"}),T=e.defineComponent({...q,props:K.selectOptionProps,setup(m){const s=m,k=e.useSlots(),l=M.useNamespace("select"),{disabled:c,index:y}=e.toRefs(s),t=e.getCurrentInstance(),o=e.inject(_.selectInjectionKey,void 0),a=e.ref(),u=e.ref("");let f=e.ref(!0);const d=e.computed(()=>s.value??s.label??u.value),r=e.computed(()=>s.label??u.value),i=e.computed(()=>v.getKeyFromValue(d.value,o==null?void 0:o.valueKey)),b=e.computed(()=>(o==null?void 0:o.component)??"li"),S=e.computed(()=>(o==null?void 0:o.valueKeys.includes(i.value))??!1),h=e.computed(()=>(o==null?void 0:o.activeKey)===i.value),B=e.computed(()=>({[l.e("option")]:!0,[l.is("active")]:h.value,[l.is("disabled")]:s.disabled,[l.is("has-suffix")]:k.suffix})),O=n=>{s.disabled||o==null||o.onSelect(i.value,n)},V=()=>{s.disabled||o==null||o.setActiveKey(i.value)},g=()=>{s.disabled||o==null||o.setActiveKey()},p=()=>{if(!s.label&&a.value){const n=a.value.textContent??"";u.value!==n&&(u.value=n)}};if(!s.internal){const n=e.reactive({raw:{value:d,label:r,disabled:c},ref:a,index:y,key:i,origin:"slot",value:d,label:r,disabled:c});f=e.computed(()=>v.isValidOption(n,{inputValue:o==null?void 0:o.inputValue,filterOption:o==null?void 0:o.filterOption})),t&&(o==null||o.addSlotOptionInfo(t.uid,n)),e.onBeforeUnmount(()=>{t&&(o==null||o.removeSlotOptionInfo(t.uid))})}return e.onMounted(()=>p()),e.onUpdated(()=>p()),(n,w)=>e.withDirectives((e.openBlock(),e.createBlock(e.resolveDynamicComponent(b.value),{ref_key:"itemRef",ref:a,class:e.normalizeClass(B.value),onClick:O,onMouseenter:V,onMouseleave:g},{default:e.withCtx(()=>[n.$slots.icon?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(l).e("option-icon"))},[e.renderSlot(n.$slots,"icon")],2)):e.createCommentVNode("",!0),e.unref(o)&&e.unref(o).multiple?(e.openBlock(),e.createBlock(e.unref($.TuCheckbox),{key:1,class:e.normalizeClass(e.unref(l).e("option-checkbox")),"model-value":S.value,disabled:e.unref(c)},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(r.value),1)])]),_:3},8,["class","model-value","disabled"])):(e.openBlock(),e.createElementBlock("span",{key:2,class:e.normalizeClass(e.unref(l).e("option-content"))},[e.renderSlot(n.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(r.value),1)])],2)),n.$slots.suffix?(e.openBlock(),e.createElementBlock("span",{key:3,class:e.normalizeClass(e.unref(l).e("option-suffix"))},[e.renderSlot(n.$slots,"suffix")],2)):e.createCommentVNode("",!0)]),_:3},40,["class"])),[[e.vShow,e.unref(f)]])}});exports.default=T;
