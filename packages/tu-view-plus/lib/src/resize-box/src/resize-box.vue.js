"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),B=require("./resize-box.js"),f=require("@tu-view-plus/hooks"),u=require("@tu-view-plus/utils"),q=require("../../resize-trigger/index.js"),d=require("./interface.js");require("../style/resize-box.css");const W=e.defineComponent({name:"TuResizeBox",inheritAttrs:!1}),X=e.defineComponent({...W,props:B.resizeBoxProps,emits:B.resizeBoxEmits,setup(C,{emit:I}){const E=C,l=I,v=f.useNamespace("resize-box"),{height:M,width:P,directions:N}=e.toRefs(E),[w,T]=f.useMergeState(null,e.reactive({value:P})),[z,R]=f.useMergeState(null,e.reactive({value:M})),h=e.ref(),x=e.computed(()=>N.value.filter(t=>d.allDirections.includes(t))),_=e.reactive({}),D=e.computed(()=>({...u.isNumber(w.value)?{width:u.addUnit(w.value)}:{},...u.isNumber(z.value)?{height:u.addUnit(z.value)}:{},..._})),p=t=>[d.DIRECTION_TOP,d.DIRECTION_BOTTOM].indexOf(t)>-1,b=(t,r)=>{if(t===0)return 0;const o=t-r;return o<=0?0:o},s={direction:"",startPageX:0,startPageY:0,startWidth:0,startHeight:0,moving:!1,padding:{left:0,right:0,top:0,bottom:0}},H=(t,r)=>{var i,a;l("movingStart",r),s.moving=!0,s.startPageX=r.pageX,s.startPageY=r.pageY,s.direction=t;const{top:o,left:n,right:c,bottom:m}=s.padding;s.startWidth=b(((i=h.value)==null?void 0:i.clientWidth)||0,n+c),s.startHeight=b(((a=h.value)==null?void 0:a.clientHeight)||0,o+m),u.on(window,"mousemove",k),u.on(window,"mouseup",g),u.on(window,"contextmenu",g),document.body.style.cursor=p(t)?"row-resize":"col-resize"},k=t=>{if(!s.moving)return;const{startPageX:r,startPageY:o,startWidth:n,startHeight:c,direction:m}=s;let i=n,a=c;const O=t.pageX-r,y=t.pageY-o;switch(m){case d.DIRECTION_LEFT:i=n-O,T(i),l("update:width",i);break;case d.DIRECTION_RIGHT:i=n+O,T(i),l("update:width",i);break;case d.DIRECTION_TOP:a=c-y,R(a),l("update:height",a);break;case d.DIRECTION_BOTTOM:a=c+y,R(a),l("update:height",a);break}l("moving",{width:i,height:a},t)},g=t=>{s.moving=!1,u.off(window,"mousemove",k),u.off(window,"mouseup",g),u.off(window,"contextmenu",g),document.body.style.cursor="default",l("movingEnd",t)},S=(t,r)=>{const{width:o,height:n}=r.contentRect,c=p(t)?n:o;s.padding[t]=c,_[`padding-${t}`]=`${c}px`};return(t,r)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.component),e.mergeProps(t.$attrs,{ref_key:"wrapperRef",ref:h,class:e.unref(v).b(),style:D.value}),{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,o=>(e.openBlock(),e.createBlock(e.unref(q.TuResizeTrigger),{key:o,class:e.normalizeClass(e.unref(v).e(o)),direction:p(o)?"horizontal":"vertical",onMousedown:n=>{H(o,n)},onResize:n=>{S(o,n)}},{default:e.withCtx(()=>[t.$slots["resize-trigger"]?e.renderSlot(t.$slots,"resize-trigger",{key:0,direction:o}):e.createCommentVNode("",!0)]),_:2},1032,["class","direction","onMousedown","onResize"]))),128))]),_:3},16,["class","style"]))}});exports.default=X;
