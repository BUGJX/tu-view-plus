"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),w=require("./sub-menu-pop.js"),_=require("@tu-view-plus/hooks"),k=require("@tu-view-plus/utils"),$=require("./hooks/use-level.js"),B=require("./hooks/use-menu-context.js"),I=require("./hooks/use-menu.js"),y=require("@tu-view-plus/constants"),z=require("../../trigger/index.js"),T=require("./base-menu.vue.js"),E=require("./menu-indent.vue.js");require("../style/menu.css");const R=e.defineComponent({name:"TuSubMenuPop",inheritAttrs:!1}),D=e.defineComponent({...R,props:w.subMenuPopProps,setup(C){const b=C,r=e.useSlots(),o=_.useNamespace("menu"),{key:l}=I.useMenu(),{level:c}=$.useLevel(),{selectable:p,isChildrenSelected:u,popupMaxHeight:a}=e.toRefs(b),t=B.useMenuContext(),{onSubMenuClick:d,onMenuItemClick:s}=t,m=e.computed(()=>t.mode),f=e.computed(()=>t.selectedKeys||[]),g=e.computed(()=>p.value&&f.value.includes(l.value)||(u==null?void 0:u.value)),M=e.computed(()=>[o.e("pop"),o.is("selected",g.value),o.is("has-icon",!!(r!=null&&r.icon))]),S=e.computed(()=>{const n=(a==null?void 0:a.value)??t.popupMaxHeight;return k.isNumber(n)?{maxHeight:`${n}px`}:n?{}:{maxHeight:"unset"}}),i=e.computed(()=>m.value==="horizontal"&&!t.inTrigger),v=e.ref(!1),h=n=>{v.value=n},x=e.computed(()=>{var n;return[o.e("trigger"),(n=t.triggerProps)==null?void 0:n.class]}),V=e.computed(()=>k.omit(t.triggerProps||{},["class"])),P=n=>{h(n)},N=()=>{d&&d(l.value,c.value),p.value&&s&&s(l.value)},q=n=>{s&&s(n),h(!1)};return(n,F)=>(e.openBlock(),e.createBlock(e.unref(z.TuTrigger),e.mergeProps({trigger:"hover","animation-class":"fade-in"},V.value,{class:x.value,position:i.value?"bl":"rt","mouse-enter-delay":50,"mouse-leave-delay":50,"popup-offset":i.value?10:20,"auto-fit-popup-min-width":!0,duration:100,"unmount-on-close":!1,"popup-visible":v.value,onPopupVisibleChange:P}),{content:e.withCtx(()=>[e.createVNode(T.default,{"in-trigger":"","selected-keys":f.value,"trigger-props":e.unref(t).triggerProps,style:e.normalizeStyle(S.value),onMenuItemClick:q},e.createSlots({default:e.withCtx(()=>[e.renderSlot(n.$slots,"default")]),_:2},[e.unref(t).expandIconDown?{name:"expand-icon-down",fn:e.withCtx(()=>[e.createVNode(e.unref(y.RenderFunction),{"render-func":e.unref(t).expandIconDown},null,8,["render-func"])]),key:"0"}:void 0,e.unref(t).expandIconRight?{name:"expand-icon-right",fn:e.withCtx(()=>[e.createVNode(e.unref(y.RenderFunction),{"render-func":e.unref(t).expandIconRight},null,8,["render-func"])]),key:"1"}:void 0]),1032,["selected-keys","trigger-props","style"])]),default:e.withCtx(()=>[e.createElementVNode("div",e.mergeProps({class:M.value,"aria-haspopup":"true"},n.$attrs,{onClick:N}),[e.createVNode(E.default,{level:e.unref(c)},null,8,["level"]),n.$slots.icon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(o).e("icon"))},[e.renderSlot(n.$slots,"icon")],2),e.createElementVNode("span",{class:e.normalizeClass(e.unref(o).e("title"))},[e.renderSlot(n.$slots,"title",{},()=>[e.createTextVNode(e.toDisplayString(n.title),1)])],2)],64)):e.renderSlot(n.$slots,"title",{key:1},()=>[e.createTextVNode(e.toDisplayString(n.title),1)]),e.createElementVNode("span",{class:e.normalizeClass(e.unref(o).e("icon-suffix"))},[i.value?e.renderSlot(n.$slots,"expand-icon-down",{key:0}):e.renderSlot(n.$slots,"expand-icon-right",{key:1})],2),g.value&&m.value==="horizontal"?(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(e.unref(o).e("selected-label"))},null,2)):e.createCommentVNode("",!0)],16)]),_:3},16,["class","position","popup-offset","popup-visible"]))}});exports.default=D;
