"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),N=require("@vueuse/core"),w=require("@tu-view-plus/utils"),M=require("@tu-view-plus/hooks"),p=require("./constants.js"),b="TuLabelWrap",y=e.defineComponent({name:b,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(l,{slots:a}){const i=e.inject(p.formContextKey,void 0),u=e.inject(p.formItemContextKey);u||w.throwError(b,"usage: <tu-form-item><label-wrap /></tu-form-item>");const W=M.useNamespace("form-item"),n=e.ref(),o=e.ref(0),g=()=>{var t;if((t=n.value)!=null&&t.firstElementChild){const r=window.getComputedStyle(n.value.firstElementChild).width;return Math.ceil(Number.parseFloat(r))}else return 0},s=(t="update")=>{e.nextTick(()=>{a.default&&l.isAutoWidth&&(t==="update"?o.value=g():t==="remove"&&(i==null||i.deregisterLabelWidth(o.value)))})},d=()=>s("update");return e.onMounted(()=>{d()}),e.onBeforeUnmount(()=>{s("remove")}),e.onUpdated(()=>d()),e.watch(o,(t,r)=>{l.updateAll&&(i==null||i.registerLabelWidth(t,r))}),N.useResizeObserver(e.computed(()=>{var t;return((t=n.value)==null?void 0:t.firstElementChild)??null}),d),()=>{var r,m;if(!a)return null;const{isAutoWidth:t}=l;if(t){const c=i==null?void 0:i.autoLabelWidth,v=u==null?void 0:u.hasLabel,f={};if(v&&c&&c!=="auto"){const h=Math.max(0,Number.parseInt(c,10)-o.value),L=i.labelPosition==="left"?"marginRight":"marginLeft";h&&(f[L]=`${h}px`)}return e.createVNode("div",{ref:n,class:[W.e("item")],style:f},[(r=a.default)==null?void 0:r.call(a)])}else return e.createVNode(e.Fragment,{ref:n},[(m=a.default)==null?void 0:m.call(a)])}}});exports.default=y;
