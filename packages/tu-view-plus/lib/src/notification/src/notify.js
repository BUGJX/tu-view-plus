"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const v=require("vue"),s=require("@tu-view-plus/utils"),T=require("./notification.vue.js"),y=require("./constants.js"),m={tl:[],tr:[],bl:[],br:[]},g=16;let E=1;const a=function(e={},t=null){if(!s.isClient)return{close:()=>{}};(typeof e=="string"||s.isVNode(e))&&(e={message:e});const i=e.position||"tr";let n=e.offset||0;m[i].forEach(({vm:f})=>{var p;n+=(((p=f.el)==null?void 0:p.offsetHeight)||0)+g}),n+=g;const c=`notification_${E++}`,d=e.onClose,u={...e,offset:n,id:c,onClose:()=>{b(c,i,d)}};let l=document.body;s.isHTMLElement(e.appendTo)?l=e.appendTo:s.isString(e.appendTo)&&(l=document.querySelector(e.appendTo)),s.isHTMLElement(l)||(s.debugWarn("TuNotification","the appendTo option is not an HTMLElement. Falling back to document.body."),l=document.body);const r=document.createElement("div"),o=v.createVNode(T.default,u,s.isVNode(u.message)?{default:()=>u.message}:null);return o.appContext=t??a._context,o.props.onDestroy=()=>{v.render(null,r)},v.render(o,r),m[i].push({vm:o}),l.appendChild(r.firstElementChild),{close:()=>{o.component.exposed.visible.value=!1}}};y.notificationTypes.forEach(e=>{a[e]=(t={})=>((typeof t=="string"||s.isVNode(t))&&(t={message:t}),a({...t,type:e}))});function b(e,t,i){const n=m[t],c=n.findIndex(({vm:o})=>{var f;return((f=o.component)==null?void 0:f.props.id)===e});if(c===-1)return;const{vm:d}=n[c];if(!d)return;i==null||i(d);const u=d.el.offsetHeight,l=t.startsWith("t")?"top":"bottom";n.splice(c,1);const r=n.length;if(!(r<1))for(let o=c;o<r;o++){const{el:f,component:p}=n[o].vm,h=Number.parseInt(f.style[l],10)-u-g;p.props.offset=h}}function _(){for(const e of Object.values(m))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}a.closeAll=_;a._context=null;exports.close=b;exports.closeAll=_;exports.default=a;
