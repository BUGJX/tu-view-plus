"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),p=require("@vueuse/core"),m=require("./notification.js"),v=require("@tu-view-plus/hooks"),a=require("@tu-view-plus/utils"),c=require("@tu-view-plus/constants");require("../../config-provider/index.js");const b=require("@tu-view-plus/icons-vue"),C=require("../../icon/index.js");require("../style/notification.css");const I=require("../../config-provider/src/hooks/use-global-config.js"),L=["id"],O={key:0},P=["innerHTML"],H=e.defineComponent({name:"TuNotification"}),G=e.defineComponent({...H,props:m.notificationProps,emits:m.notificationEmits,setup(y,{expose:k,emit:h}){const t=y;let i;const n=v.useNamespace("notification"),{ns:E,zIndex:T}=I.useGlobalComponentSettings("notification"),{nextZIndex:w,currentZIndex:g}=T,s=e.ref(!1),z=e.computed(()=>t.position.endsWith("r")?"right":"left"),N=e.computed(()=>t.position.startsWith("t")?"top":"bottom"),u=e.computed(()=>t.type&&a.TypeComponentsMap[t.type]||t.icon),S=e.computed(()=>[n.b(),{[n.m(t.size)]:t.size},{[n.is("show-close")]:t.showClose},t.customClass,z.value]),B=e.computed(()=>({[N.value]:a.addUnit(t.offset),zIndex:t.zIndex??g.value})),q=e.computed(()=>{const o=t.type;return o&&a.TypeComponentsMap[t.type]?n.em("type-icon",o):""}),M=e.computed(()=>t.title?void 0:{margin:0}),V=()=>{h("destroy")},l=()=>{t.duration>0&&({stop:i}=p.useTimeoutFn(()=>{s.value&&r()},t.duration))},d=()=>{i==null||i()},r=()=>{s.value=!1},D=({code:o})=>{o===c.EVENT_CODE.delete||o===c.EVENT_CODE.backspace?d():o===c.EVENT_CODE.esc?s.value&&r():l()};return p.useEventListener(document,"keydown",D),e.onMounted(()=>{l(),w(),s.value=!0}),k({visible:s,close:r}),(o,f)=>(e.openBlock(),e.createBlock(e.Transition,{name:`${e.unref(v.defaultNamespace)}-notification-fade`,onBeforeLeave:o.onClose,onAfterLeave:V},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{role:"alert",id:o.id,class:e.normalizeClass(e.unref(S)),style:e.normalizeStyle(e.unref(B)),onMouseenter:d,onMouseleave:l,onClick:f[0]||(f[0]=(..._)=>o.onClick&&o.onClick(..._))},[e.unref(u)?(e.openBlock(),e.createBlock(e.unref(C.TuIcon),{key:0,class:e.normalizeClass([e.unref(E).e("type-icon"),e.unref(q)])},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(u))))]),_:1},8,["class"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(n).e("group"))},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(n).e("title"))},e.toDisplayString(o.title),3),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(e.unref(n).e("content")),style:e.normalizeStyle(e.unref(M))},[e.renderSlot(o.$slots,"default",{},()=>[o.dangerouslyUseHTMLString?(e.openBlock(),e.createElementBlock("div",{key:1,innerHTML:o.message},null,8,P)):(e.openBlock(),e.createElementBlock("div",O,e.toDisplayString(o.message),1))])],6),[[e.vShow,o.message]]),e.withDirectives(e.createVNode(e.unref(C.TuIcon),{class:e.normalizeClass(e.unref(n).e("close-icon")),onClick:e.withModifiers(r,["stop"])},{default:e.withCtx(()=>[e.createVNode(e.unref(b.Close))]),_:1},8,["class","onClick"]),[[e.vShow,o.showClose]])],2)],46,L),[[e.vShow,s.value]])]),_:3},8,["name","onBeforeLeave"]))}});exports.default=G;
