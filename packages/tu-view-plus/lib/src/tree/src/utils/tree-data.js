"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("@tu-view-plus/utils"),f=(()=>{let c=0;return()=>(c+=1,`__tu_tree${c}`)})();function h(c,t){return!!(d.isUndefined(c)?t:c)}function g(c,t){const n={...c};return t&&Object.keys(t).forEach(e=>{const i=t[e];i!==e&&(n[e]=c[i],delete n[i])}),n}function b({subEnable:c,superEnable:t,isLeaf:n,treeNodeData:a,level:e}){return d.isUndefined(c)?d.isFunction(t)?t(a,{isLeaf:n,level:e}):t??!1:c}function k(c){var u;const{treeNodeData:t,parentNode:n,isTail:a=!0,treeProps:e}=c,{fieldNames:i}=e||{},l=g(t,i),s=e.loadMore?!!l.isLeaf:!((u=l.children)!=null&&u.length),r=n?n.level+1:0,o={...d.omit(l,["children"]),key:l.key??f(),selectable:b({subEnable:l.selectable,superEnable:e==null?void 0:e.selectable,isLeaf:s,level:r,treeNodeData:t}),disabled:!!l.disabled,disableCheckbox:!!l.disableCheckbox,checkable:b({subEnable:l.checkable,superEnable:e==null?void 0:e.checkable,isLeaf:s,level:r,treeNodeData:t}),isLeaf:s,isTail:a,blockNode:!!(e!=null&&e.blockNode),showLine:!!(e!=null&&e.showLine),level:r,lineless:n?[...n.lineless,n.isTail]:[],draggable:h(l.draggable,e==null?void 0:e.draggable)};return{...o,treeNodeProps:o,treeNodeData:t,parent:n,parentKey:n==null?void 0:n.key,pathParentKeys:n?[...n.pathParentKeys,n.key]:[]}}function y(c,t){function n(a,e){if(!a)return;const{fieldNames:i}=t,l=[];return a.forEach((s,r)=>{const o=k({treeNodeData:s,treeProps:t,parentNode:e,isTail:r===a.length-1});o.children=n(s[(i==null?void 0:i.children)||"children"],o),l.push(o)}),l}return n(c)}exports.generateKey=f;exports.generateTreeData=y;
