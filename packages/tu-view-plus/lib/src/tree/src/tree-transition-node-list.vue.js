"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),m=require("./tree-transition-node-list.js"),T=require("@tu-view-plus/hooks");require("@tu-view-plus/utils");const k=require("./hooks/use-tree-context.js"),x=require("./tree-expand-transition.vue.js"),h=require("./tree-base-node.vue.js"),N=e.defineComponent({name:"TuTreeTransitionNodeList"}),B=e.defineComponent({...N,props:m.treeTransitionNodeListProps,setup(p){const _=p,f=T.useNamespace("tree"),n=k.useTreeContext(),{nodeKey:o}=e.toRefs(_),i=e.computed(()=>{var t,r;return(r=(t=n.expandedKeys)==null?void 0:t.includes)==null?void 0:r.call(t,o.value)}),d=e.computed(()=>{var a;const t=new Set(n.expandedKeys||[]),r=(a=n.flattenTreeData)==null?void 0:a.filter(s=>{var l,u;return(l=s.pathParentKeys)!=null&&l.includes(o.value)?!n.filterTreeNode||((u=n.filterTreeNode)==null?void 0:u.call(n,s.treeNodeData)):!1});return r==null?void 0:r.filter(s=>{var u;if(i.value)return(u=s.pathParentKeys)==null?void 0:u.every(c=>t.has(c));const l=s.pathParentKeys.indexOf(o.value);return s.pathParentKeys.slice(l+1).every(c=>t.has(c))})}),v=e.computed(()=>{var t,r;return((t=n.currentExpandKeys)==null?void 0:t.includes(o.value))&&((r=d.value)==null?void 0:r.length)});function y(){var t;(t=n.onExpandEnd)==null||t.call(n,o.value)}return(t,r)=>(e.openBlock(),e.createBlock(x.default,{expanded:i.value,onEnd:y},{default:e.withCtx(()=>[v.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(f).e("node-list"))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,a=>(e.openBlock(),e.createBlock(h.default,e.mergeProps({key:a.key},a.treeNodeProps),null,16))),128))],2)):e.createCommentVNode("",!0)]),_:1},8,["expanded"]))}});exports.default=B;
