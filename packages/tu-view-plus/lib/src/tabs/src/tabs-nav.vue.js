"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),F=require("@tu-view-plus/hooks"),U=require("@tu-view-plus/utils"),T=require("./tabs-nav.js"),j=require("@tu-view-plus/icons-vue"),V=require("./tabs-button.vue.js"),A=require("./tabs-tab.vue.js"),G=require("./tabs-nav-indicate.vue.js"),J=require("../../icon/index.js"),R=require("../../resize-observer/index.js"),x=require("./utils.js");require("../style/tabs.css");const Q=e.defineComponent({name:"TuTabsNav"}),X=e.defineComponent({...Q,props:T.tabsNavProps,emits:T.tabsNavEmits,setup(z,{emit:_}){const n=z,{tabs:y,activeKey:d,activeIndex:q,direction:i}=e.toRefs(n),o=F.useNamespace("tabs"),s=e.ref(),u=e.ref(),b=e.ref({}),C=e.ref(),c=e.ref(!1),p=e.ref(0),f=e.ref(0),v=e.ref([]),r=e.ref(0),g=e.computed(()=>{if(!U.isUndefined(d==null?void 0:d.value))return b.value[d.value]}),w=e.computed(()=>({[o.e("nav")]:!0,[o.em("nav",n.direction)]:n.direction,[o.em("nav",n.position)]:n.position,[o.em("nav",n.size)]:n.size,[o.em("nav",n.type)]:n.type})),E=e.computed(()=>({[o.e("nav-tab")]:!0,[o.em("nav-tab","scroll")]:c.value})),h=e.computed(()=>n.type==="slider"?0:x.gap),O=e.computed(()=>x.getTabListStyle({direction:n.direction,type:n.type,offset:r.value,gap:h.value})),S=t=>!s.value||!u.value||t<0?0:t>f.value?f.value:t,W=t=>s.value?t==="previous"?r.value-p.value:r.value+p.value:0,H=()=>s.value&&u.value?n.direction==="vertical"?u.value.offsetHeight>s.value.offsetHeight:u.value.offsetWidth>s.value.offsetWidth:!1,I=()=>{var t,a;return(i.value==="vertical"?(t=s.value)==null?void 0:t.offsetHeight:(a=s.value)==null?void 0:a.offsetWidth)??0},$=()=>!u.value||!s.value?0:i.value==="vertical"?u.value.offsetHeight-s.value.offsetHeight:u.value.offsetWidth-s.value.offsetWidth,L=()=>y.value.map(t=>{const a=b.value[t.key];return i.value==="vertical"?a.offsetTop+a.offsetHeight:a.offsetLeft+a.offsetWidth}),B=t=>(v.value[t-1]??0)>=r.value&&v.value[t]<=r.value+p.value,N=t=>{r.value=S(W(t))},m=()=>{c.value=H(),c.value?(p.value=I(),f.value=$(),v.value=L(),r.value>f.value&&(r.value=f.value)):r.value=0},D=()=>{m(),C.value&&C.value.$forceUpdate()},M=(t,a)=>{_("click",t,a)},P=(t,a)=>{_("delete",t,a)};return e.watch(y,()=>{e.nextTick(()=>m())}),e.watch(q,(t,a)=>{e.nextTick(()=>{if(c.value)if(t>=a){const l=t<v.value.length-1?t+1:t;B(l)||(r.value=v.value[l]-p.value+h.value)}else{const l=t>0?t-1:t;B(l)||(r.value=v.value[l-1]??0)}})}),e.onMounted(()=>{m()}),(t,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(w))},[c.value?(e.openBlock(),e.createBlock(V.default,{key:0,type:"previous",direction:e.unref(i),disabled:r.value<=0,onClick:N},null,8,["direction","disabled"])):e.createCommentVNode("",!0),e.createVNode(e.unref(R.TuResizeObserver),{onResize:m},{default:e.withCtx(()=>[e.createElementVNode("div",{ref_key:"wrapperRef",ref:s,class:e.normalizeClass(e.unref(E))},[e.createVNode(e.unref(R.TuResizeObserver),{onResize:D},{default:e.withCtx(()=>[e.createElementVNode("div",{ref_key:"listRef",ref:u,class:e.normalizeClass(e.unref(o).e("nav-tab-list")),style:e.normalizeStyle(e.unref(O))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(y),l=>(e.openBlock(),e.createBlock(A.default,{key:l.key,ref_for:!0,ref:k=>{k!=null&&k.$el&&(b.value[l.key]=k.$el)},active:l.key===e.unref(d),tab:l,editable:t.editable,onClick:M,onDelete:P},{default:e.withCtx(()=>[l.slots.title?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.slots.title),{key:0})):e.createCommentVNode("",!0),l.title?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(l.title),1)],64)):e.createCommentVNode("",!0)]),_:2},1032,["active","tab","editable"]))),128)),e.unref(g)?(e.openBlock(),e.createBlock(G.default,{key:0,ref_key:"indicateRef",ref:C,activeTabRef:e.unref(g),direction:e.unref(i),disabled:!1,animation:t.animation},null,8,["activeTabRef","direction","animation"])):e.createCommentVNode("",!0)],6)]),_:1})],2)]),_:1}),c.value?(e.openBlock(),e.createBlock(V.default,{key:1,type:"next",direction:e.unref(i),disabled:r.value>=f.value,onClick:N},null,8,["direction","disabled"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(o).e("nav-extra"))},[t.showAddButton?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(o).e("button-add")),onClick:a[0]||(a[0]=l=>_("add",l))},[e.createVNode(e.unref(J.TuIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(j.CirclePlus))]),_:1})],2)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"extra")],2)],2))}});exports.default=X;
