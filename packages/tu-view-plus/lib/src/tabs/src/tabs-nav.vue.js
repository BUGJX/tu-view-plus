"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),P=require("@tu-view-plus/hooks"),F=require("@tu-view-plus/utils"),N=require("./tabs-nav.js"),U=require("@tu-view-plus/icons-vue"),T=require("./tabs-button.vue.js"),j=require("./tabs-tab.vue.js"),A=require("./tabs-nav-indicate.vue.js"),G=require("../../icon/index.js"),V=require("../../resize-observer/index.js"),R=require("./utils.js");require("../style/tabs.css");const J=e.defineComponent({name:"TuTabsNav"}),Q=e.defineComponent({...J,props:N.tabsNavProps,emits:N.tabsNavEmits,setup(x,{emit:_}){const r=x,{tabs:b,activeKey:d,activeIndex:z,direction:i}=e.toRefs(r),o=P.useNamespace("tabs"),s=e.ref(),u=e.ref(),y=e.ref({}),h=e.ref(),c=e.ref(!1),p=e.ref(0),f=e.ref(0),v=e.ref([]),n=e.ref(0),C=e.computed(()=>{if(!F.isUndefined(d==null?void 0:d.value))return y.value[d.value]}),q=e.computed(()=>({[o.e("nav")]:!0,[o.em("nav",r.direction)]:r.direction,[o.em("nav",r.position)]:r.position,[o.em("nav",r.size)]:r.size,[o.em("nav",r.type)]:r.type})),w=e.computed(()=>({[o.e("nav-tab")]:!0,[o.em("nav-tab","scroll")]:c.value})),E=e.computed(()=>R.getTabListStyle({direction:r.direction,type:r.type,offset:n.value})),O=t=>!s.value||!u.value||t<0?0:t>f.value?f.value:t,S=t=>s.value?t==="previous"?n.value-p.value:n.value+p.value:0,W=()=>s.value&&u.value?r.direction==="vertical"?u.value.offsetHeight>s.value.offsetHeight:u.value.offsetWidth>s.value.offsetWidth:!1,H=()=>{var t,a;return(i.value==="vertical"?(t=s.value)==null?void 0:t.offsetHeight:(a=s.value)==null?void 0:a.offsetWidth)??0},I=()=>!u.value||!s.value?0:i.value==="vertical"?u.value.offsetHeight-s.value.offsetHeight:u.value.offsetWidth-s.value.offsetWidth,$=()=>b.value.map(t=>{const a=y.value[t.key];return i.value==="vertical"?a.offsetTop+a.offsetHeight:a.offsetLeft+a.offsetWidth}),g=t=>(v.value[t-1]??0)>=n.value&&v.value[t]<=n.value+p.value,B=t=>{n.value=O(S(t))},m=()=>{c.value=W(),c.value?(p.value=H(),f.value=I(),v.value=$(),n.value>f.value&&(n.value=f.value)):n.value=0},L=()=>{m(),h.value&&h.value.$forceUpdate()},D=(t,a)=>{_("click",t,a)},M=(t,a)=>{_("delete",t,a)};return e.watch(b,()=>{e.nextTick(()=>m())}),e.watch(z,(t,a)=>{e.nextTick(()=>{if(c.value)if(t>=a){const l=t<v.value.length-1?t+1:t;g(l)||(n.value=v.value[l]-p.value+R.gap)}else{const l=t>0?t-1:t;g(l)||(n.value=v.value[l-1]??0)}})}),e.onMounted(()=>{m()}),(t,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(q))},[c.value?(e.openBlock(),e.createBlock(T.default,{key:0,type:"previous",direction:e.unref(i),disabled:n.value<=0,onClick:B},null,8,["direction","disabled"])):e.createCommentVNode("",!0),e.createVNode(e.unref(V.TuResizeObserver),{onResize:m},{default:e.withCtx(()=>[e.createElementVNode("div",{ref_key:"wrapperRef",ref:s,class:e.normalizeClass(e.unref(w))},[e.createVNode(e.unref(V.TuResizeObserver),{onResize:L},{default:e.withCtx(()=>[e.createElementVNode("div",{ref_key:"listRef",ref:u,class:e.normalizeClass(e.unref(o).e("nav-tab-list")),style:e.normalizeStyle(e.unref(E))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(b),l=>(e.openBlock(),e.createBlock(j.default,{key:l.key,ref_for:!0,ref:k=>{k!=null&&k.$el&&(y.value[l.key]=k.$el)},active:l.key===e.unref(d),tab:l,editable:t.editable,onClick:D,onDelete:M},{default:e.withCtx(()=>[l.slots.title?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.slots.title),{key:0})):e.createCommentVNode("",!0),l.title?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(l.title),1)],64)):e.createCommentVNode("",!0)]),_:2},1032,["active","tab","editable"]))),128)),e.unref(C)?(e.openBlock(),e.createBlock(A.default,{key:0,ref_key:"indicateRef",ref:h,activeTabRef:e.unref(C),direction:e.unref(i),disabled:!1,animation:t.animation},null,8,["activeTabRef","direction","animation"])):e.createCommentVNode("",!0)],6)]),_:1})],2)]),_:1}),c.value?(e.openBlock(),e.createBlock(T.default,{key:1,type:"next",direction:e.unref(i),disabled:n.value>=f.value,onClick:B},null,8,["direction","disabled"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(o).e("nav-extra"))},[t.showAddButton?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(o).e("button-add")),onClick:a[0]||(a[0]=l=>_("add",l))},[e.createVNode(e.unref(G.TuIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(U.Plus))]),_:1})],2)):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"extra")],2)],2))}});exports.default=Q;
