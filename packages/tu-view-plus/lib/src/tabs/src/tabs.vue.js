"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),g=require("./tabs.js"),K=require("@tu-view-plus/hooks"),S=require("@tu-view-plus/utils"),V=require("./tabs-nav.vue.js"),D=require("./constants.js");require("../style/tabs.css");const O=t.defineComponent({name:"TuTabs",props:g.tabsProps,emits:g.tabsEmits,setup(a,{emit:i,slots:o}){const n=K.useNamespace("tabs"),{lazyLoad:_,destroyOnHide:T,trigger:q}=t.toRefs(a),v=t.ref(a.defaultActiveKey),u=t.computed(()=>a.direction==="vertical"?"left":a.position),l=t.computed(()=>["left","right"].includes(u.value)?"vertical":"horizontal"),{children:m,components:x}=K.useChildrenComponents("TuTabPane"),r=t.reactive(new Map),b=t.computed(()=>{const e=[];return x.value.forEach(c=>{const C=r.get(c);C&&e.push(C)}),e}),s=t.computed(()=>b.value.map(e=>e.key)),d=t.computed(()=>{const e=a.activeKey??v.value;return S.isUndefined(e)?s.value[0]:e}),f=t.computed(()=>{const e=s.value.indexOf(d.value);return e===-1?0:e}),z=t.computed(()=>({[n.b()]:!0,[n.m(l.value)]:l.value,[n.m(u.value)]:u.value,[n.m(a.type)]:a.type,[n.m(a.size)]:a.size})),A=t.computed(()=>({[n.e("content")]:!0,[n.is("hide")]:a.hideContent})),N=t.computed(()=>({[n.e("content-list")]:!0,[n.is("animation")]:a.animation})),I=t.computed(()=>({marginLeft:`-${f.value*100}%`})),P=(e,c)=>{h(e),i("tabClick",e,c)},p=e=>{i("add",e),a.autoSwitch&&t.nextTick(()=>{const c=s.value[s.value.length-1];h(c)})},w=(e,c)=>{i("delete",e,c)},h=e=>{e!==d.value&&(v.value=e,i("update:activeKey",e),i("change",e))},L=(e,c)=>{r.set(e,c)},M=e=>{r.delete(e)};t.provide(D.tabsInjectionKey,t.reactive({lazyLoad:_,destroyOnHide:T,activeKey:d,addItem:L,removeItem:M,trigger:q}));const y=()=>t.createVNode("div",{class:A.value},[t.createVNode("div",{class:N.value,style:I.value},[m.value])]);return()=>{var e;return m.value=(e=o.default)==null?void 0:e.call(o),t.createVNode("div",{class:z.value},[u.value==="bottom"?y():null,t.createVNode(V.default,{tabs:b.value,activeKey:d.value,activeIndex:f.value,direction:l.value,position:u.value,editable:a.editable,animation:a.animation,showAddButton:a.showAddButton,headerPadding:a.headerPadding,size:a.size,type:a.type,onClick:P,onAdd:p,onDelete:w},{extra:o.extra}),u.value!=="bottom"?y():null])}}});exports.default=O;
