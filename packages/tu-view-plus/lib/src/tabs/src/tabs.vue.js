"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),g=require("./tabs.js"),_=require("@tu-view-plus/hooks"),L=require("@tu-view-plus/utils"),M=require("@tu-view-plus/constants"),O=require("./tabs-nav.vue.js"),S=require("./constants.js");require("../style/tabs.css");const j=t.defineComponent({name:"TuTabs",props:g.tabsProps,emits:g.tabsEmits,setup(a,{emit:u,slots:o}){const n=_.useNamespace("tabs"),{lazyLoad:K,destroyOnHide:T,trigger:q}=t.toRefs(a),m=t.ref(a.defaultActiveKey),i=t.computed(()=>a.direction==="vertical"?"left":a.position),l=t.computed(()=>["left","right"].includes(i.value)?"vertical":"horizontal"),{children:b,components:x}=_.useChildrenComponents("TuTabPane"),r=t.reactive(new Map),h=t.computed(()=>{const e=[];return x.value.forEach(c=>{const C=r.get(c);C&&e.push(C)}),e}),s=t.computed(()=>h.value.map(e=>e.key)),d=t.computed(()=>{const e=a.activeKey??m.value;return L.isUndefined(e)?s.value[0]:e}),f=t.computed(()=>{const e=s.value.indexOf(d.value);return e===-1?0:e}),A=t.computed(()=>({[n.b()]:!0,[n.m(l.value)]:l.value,[n.m(i.value)]:i.value,[n.m(a.type)]:a.type,[n.m(a.size)]:a.size})),N=t.computed(()=>({[n.e("content")]:!0,[n.is("hide")]:a.hideContent})),z=t.computed(()=>({[n.e("content-list")]:!0,[n.is("animation")]:a.animation})),E=t.computed(()=>({marginLeft:`-${f.value*100}%`})),P=(e,c)=>{v(e),u("tabClick",e,c)},V=e=>{u("add",e),a.autoSwitch&&t.nextTick(()=>{const c=s.value[s.value.length-1];v(c)})},w=(e,c)=>{u("delete",e,c)},v=e=>{e!==d.value&&(m.value=e,u("update:activeKey",e),u("change",e),u(M.UPDATE_MODEL_EVENT,e))},D=(e,c)=>{r.set(e,c)},I=e=>{r.delete(e)};t.provide(S.tabsInjectionKey,t.reactive({lazyLoad:K,destroyOnHide:T,activeKey:d,addItem:D,removeItem:I,trigger:q})),t.watch(()=>a.modelValue,e=>v(e));const y=()=>t.createVNode("div",{class:N.value},[t.createVNode("div",{class:z.value,style:E.value},[b.value])]);return()=>{var e;return b.value=(e=o.default)==null?void 0:e.call(o),t.createVNode("div",{class:A.value},[i.value==="bottom"?y():null,t.createVNode(O.default,{tabs:h.value,activeKey:d.value,activeIndex:f.value,direction:l.value,position:i.value,editable:a.editable,animation:a.animation,showAddButton:a.showAddButton,headerPadding:a.headerPadding,size:a.size,type:a.type,onClick:P,onAdd:V,onDelete:w},{extra:o.extra}),i.value!=="bottom"?y():null])}}});exports.default=j;
