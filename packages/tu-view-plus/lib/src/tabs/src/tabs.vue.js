"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),g=require("./tabs.js"),_=require("@tu-view-plus/hooks"),L=require("@tu-view-plus/utils"),M=require("@tu-view-plus/constants"),O=require("./tabs-nav.vue.js"),S=require("./constants.js");require("../style/tabs.css");const j=t.defineComponent({name:"TuTabs",props:g.tabsProps,emits:g.tabsEmits,setup(a,{emit:o,slots:i}){const c=_.useNamespace("tabs"),{lazyLoad:K,destroyOnHide:T,trigger:p}=t.toRefs(a),m=t.ref(a.defaultActiveKey),u=t.computed(()=>a.direction==="vertical"?"left":a.position),l=t.computed(()=>["left","right"].includes(u.value)?"vertical":"horizontal"),{children:b,components:q}=_.useChildrenComponents("TuTabPane"),r=t.reactive(new Map),h=t.computed(()=>{const e=[];return q.value.forEach(n=>{const C=r.get(n);C&&e.push(C)}),e}),s=t.computed(()=>h.value.map(e=>e.key)),d=t.computed(()=>{const e=a.activeKey??m.value;return L.isUndefined(e)?s.value[0]:e}),f=t.computed(()=>{const e=s.value.indexOf(d.value);return e===-1?0:e}),x=t.computed(()=>({[c.b()]:!0,[c.m(l.value)]:l.value,[c.m(u.value)]:u.value,[c.m(a.type)]:a.type})),A=t.computed(()=>({[c.e("content")]:!0,[c.is("hide")]:a.hideContent})),N=t.computed(()=>({[c.e("content-list")]:!0,[c.is("animation")]:a.animation})),E=t.computed(()=>({marginLeft:`-${f.value*100}%`})),P=(e,n)=>{v(e),o("tabClick",e,n)},V=e=>{o("add",e),a.autoSwitch&&t.nextTick(()=>{const n=s.value[s.value.length-1];v(n)})},w=(e,n)=>{o("delete",e,n)},v=e=>{e!==d.value&&(m.value=e,o("update:activeKey",e),o("change",e),o(M.UPDATE_MODEL_EVENT,e))},D=(e,n)=>{r.set(e,n)},I=e=>{r.delete(e)};t.provide(S.tabsInjectionKey,t.reactive({lazyLoad:K,destroyOnHide:T,activeKey:d,addItem:D,removeItem:I,trigger:p})),t.watch(()=>a.modelValue,e=>v(e));const y=()=>t.createVNode("div",{class:A.value},[t.createVNode("div",{class:N.value,style:E.value},[b.value])]);return()=>{var e;return b.value=(e=i.default)==null?void 0:e.call(i),t.createVNode("div",{class:x.value},[u.value==="bottom"?y():null,t.createVNode(O.default,{tabs:h.value,activeKey:d.value,activeIndex:f.value,direction:l.value,position:u.value,editable:a.editable,animation:a.animation,showAddButton:a.showAddButton,headerPadding:a.headerPadding,type:a.type,onClick:P,onAdd:V,onDelete:w},{extra:i.extra}),u.value!=="bottom"?y():null])}}});exports.default=j;
