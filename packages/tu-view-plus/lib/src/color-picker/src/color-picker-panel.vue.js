"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),P=require("./color-picker-panel.js"),s=require("@tu-view-plus/hooks"),h=require("@tu-view-plus/utils"),y=require("./color-picker-palette.vue.js"),g=require("./color-picker-control-bar.vue.js"),m=require("../../select/index.js"),f=require("./color-picker-input-rgb.vue.js"),H=require("./color-picker-input-hex.vue.js");require("../style/color-picker.css");const S=l.defineComponent({name:"TuColorPickerPanel",props:P.colorPickerPanelProps,setup(e){const{t:n}=s.useLocale(),t=s.useNamespace("color-picker"),c=l.computed(()=>e.color.hsv),u=l.ref(c.value.h),[i,C]=s.useState(e.format||"hex"),_=o=>C(o),b=o=>{var v;const r=h.hexToRgb(o)||{r:255,g:0,b:0},a=h.rgbToHsv(r.r,r.g,r.b);(v=e.onHsvChange)==null||v.call(e,a)},N=()=>{const o={color:e.color,alpha:e.alpha,disabled:e.disabled,disabledAlpha:e.disabledAlpha,onHsvChange:e.onHsvChange,onAlphaChange:e.onAlphaChange};return i.value==="rgb"?l.createVNode(f.default,o,null):l.createVNode(H.default,o,null)},V=o=>l.createVNode("div",{key:o,class:t.e("color-block"),style:{backgroundColor:o},onClick:()=>b(o)},[l.createVNode("div",{class:t.e("block"),style:{backgroundColor:o}},null)]),d=(o,r)=>l.createVNode("div",{class:t.e("colors-section")},[l.createVNode("div",{class:t.e("colors-text")},[o]),l.createVNode("div",{class:t.e("colors-wrapper")},[r!=null&&r.length?l.createVNode("div",{class:t.e("colors-list")},[r.map(V)]):l.createVNode("span",{class:t.e("colors-empty")},[n("tu.colorPicker.empty")])])]),k=()=>e.showHistory||e.showPreset?l.createVNode("div",{class:t.e("panel-colors")},[e.showHistory&&d(n("tu.colorPicker.history"),e.historyColors),e.showPreset&&d(n("tu.colorPicker.preset"),e.presetColors)]):null;return()=>l.createVNode("div",{class:{[t.e("panel")]:!0,[t.is("disabled")]:e.disabled}},[l.createVNode(y.default,{color:e.color,onChange:(o,r)=>{var a;return(a=e.onHsvChange)==null?void 0:a.call(e,{h:c.value.h,s:o,v:r})}},null),l.createVNode("div",{class:t.e("panel-control")},[l.createVNode("div",{class:t.e("control-wrapper")},[l.createVNode("div",null,[l.createVNode(g.default,{type:"hue",x:u.value,color:e.color,colorString:e.colorString,onChange:o=>{var r;u.value=o,(r=e.onHsvChange)==null||r.call(e,{h:o,s:c.value.s,v:c.value.v})}},null),!e.disabledAlpha&&l.createVNode(g.default,{type:"alpha",x:e.alpha,color:e.color,colorString:e.colorString,onChange:e.onAlphaChange},null)]),l.createVNode("div",{class:t.e("cotrol-preview")},[l.createVNode("div",{class:t.e("control-preview-inner"),style:{backgroundColor:e.colorString}},null)])]),l.createVNode("div",{class:t.e("input-wrapper")},[l.createVNode(m.TuSelect,{class:t.e("select"),size:"mini","trigger-props":{class:t.e("select-popup")},options:[{value:"hex",label:"Hex"},{value:"rgb",label:"RGB"}],modelValue:i.value,onChange:_},null),N()])]),k()])}});exports.default=S;
