"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("vue");require("../../message/index.js");const l=require("@tu-view-plus/utils"),r=require("./modal.vue.js"),v=require("../../message/src/constants.js"),a=(e,n)=>{let o=l.getOverlay("modal");const s=()=>{t.component&&(t.component.props.visible=!1),l.isFunction(e.onOk)&&e.onOk()},c=()=>{t.component&&(t.component.props.visible=!1),l.isFunction(e.onCancel)&&e.onCancel()},u=async()=>{await i.nextTick(),o&&(i.render(null,o),document.body.removeChild(o)),o=null,l.isFunction(e.onClose)&&e.onClose()},f=()=>{t.component&&(t.component.props.visible=!1)},p=C=>{t.component&&Object.entries(C).forEach(([b,_])=>{t.component.props[b]=_})},m={visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:s,onCancel:c,onClose:u},t=i.createVNode(r.default,{...m,...l.omit(e,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"]),footer:typeof e.footer=="boolean"?e.footer:void 0},{default:l.getSlotFunction(e.content),title:l.getSlotFunction(e.title),footer:typeof e.footer!="boolean"?l.getSlotFunction(e.footer):void 0});return(n??r.default._context)&&(t.appContext=n??r.default._context),i.render(t,o),document.body.appendChild(o),{close:f,update:p}},d={open:a,confirm:(e,n)=>{const o={simple:!0,...e};return a(o,n)},...v.messageTypes.reduce((e,n)=>(e[n]=(o,s)=>{const c={simple:!0,hideCancel:!0,messageType:n,...o};return a(c,s)},e),{})},y=Object.assign(r.default,{...d,install:(e,n)=>{e.component(r.default.name,r.default);const o={};for(const s of Object.keys(d))o[s]=(c,u=e._context)=>d[s](c,u);e.config.globalProperties.$modal=o},_context:null});exports.default=y;
