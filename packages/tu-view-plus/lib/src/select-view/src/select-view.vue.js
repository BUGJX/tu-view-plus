"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("vue"),P=require("@tu-view-plus/hooks"),r=require("@tu-view-plus/icons-vue"),g=require("./select-view.js"),_=require("../../input-label/index.js"),j=require("../../input-tag/index.js"),d=require("../../icon/index.js");require("../../form/index.js");require("../style/select-view.css");const x=require("../../form/src/hooks/use-form-props.js"),B=n.defineComponent({name:"TuSelectView",props:g.selectViewProps,emits:g.selectViewEmits,setup(e,{emit:o,slots:l,expose:N}){const a=P.useNamespace("select-view"),{opened:S}=n.toRefs(e),s=n.ref(),c=n.computed(()=>{var u;return(u=s.value)==null?void 0:u.inputRef}),T=n.computed(()=>e.modelValue.length===0),q=n.computed(()=>e.allowSearch||e.allowCreate),C=n.computed(()=>e.allowClear&&!e.disabled&&!T.value),m=x.useFormSize(),f=x.useFormDisabled(),v=n.computed(()=>({[a.b()]:!0,[a.m(e.multiple?"multiple":"single")]:!0,[a.is("opened")]:e.opened})),I=(u,t)=>{o("remove",u,t)},V=u=>{o("focus",u)},w=u=>{o("blur",u)},F=u=>{o("clear",u)},R=()=>{c.value&&c.value.focus()},z=()=>{c.value&&c.value.blur()};return n.watch(S,u=>{!u&&c.value&&c.value.isSameNode(document.activeElement)&&c.value.blur()}),N({focus:R,blur:z}),()=>{var b;const u=()=>{var i,h;return e.loading?((i=l["loading-icon"])==null?void 0:i.call(l))??n.createVNode(d.TuIcon,{class:["is-loading",a.e("icon"),a.em("icon","loading")]},{default:()=>[n.createVNode(r.Loading,null,null)]}):e.allowSearch&&e.opened?((h=l["search-icon"])==null?void 0:h.call(l))??n.createVNode(d.TuIcon,{class:[a.e("icon"),a.em("icon","search")]},{default:()=>[n.createVNode(r.Search,null,null)]}):l["arrow-icon"]?l["arrow-icon"]():n.createVNode(d.TuIcon,{class:[a.e("icon"),a.em("icon","arrow")]},{default:()=>[n.createVNode(r.ArrowDown,null,null)]})},t=()=>n.createVNode(n.Fragment,null,[C.value&&n.createVNode(d.TuIcon,{class:[a.e("icon"),a.em("icon","clear")],onMousedown:i=>i.stopPropagation(),onClick:F},{default:()=>[n.createVNode(r.Close,null,null)]}),u()]);return e.multiple?n.createVNode(j.TuInputTag,{ref:s,class:v.value,"model-value":e.modelValue,"input-value":e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:f.value,size:m.value,maxTagCount:e.maxTagCount,disabledInput:!e.allowSearch&&!e.allowCreate,"retain-input-value":!0,"uninject-form-item-context":!0,onRemove:I,onFocus:V,onBlur:w},{prefix:l.prefix,suffix:t,tag:l.label}):n.createVNode(_.TuInputLabel,{ref:s,class:v.value,"model-value":(b=e.modelValue)==null?void 0:b[0],"input-value":e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:f.value,size:m.value,"enabled-input":q.value,"uninject-form-item-context":!0,onFocus:V,onBlur:w},{default:l.label,prefix:l.prefix,suffix:t})}}});exports.default=B;
