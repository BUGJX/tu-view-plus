"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("vue"),j=require("@tu-view-plus/hooks"),r=require("@tu-view-plus/icons-vue"),h=require("./select-view.js"),p=require("../../input-label/index.js"),R=require("../../input-tag/index.js"),g=require("../../icon/index.js");require("../../form/index.js");require("../style/select-view.css");const x=require("../../form/src/hooks/use-form-props.js");function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!n.isVNode(e)}const y=n.defineComponent({name:"TuSelectView",props:h.selectViewProps,emits:h.selectViewEmits,setup(e,{emit:c,slots:l}){const t=j.useNamespace("select-view"),{opened:S}=n.toRefs(e),d=n.ref(),s=n.computed(()=>{var u;return(u=d.value)==null?void 0:u.inputRef}),N=n.computed(()=>e.modelValue.length===0),q=n.computed(()=>e.allowSearch||e.clearable),C=n.computed(()=>e.clearable&&!e.disabled&&!N.value),m=x.useFormSize(),f=x.useFormDisabled(),v=n.computed(()=>({[t.b()]:!0,[t.m(e.multiple?"multiple":"single")]:!0,[t.is("opened")]:e.opened})),T=n.computed(()=>({[t.e("icon")]:!0,[t.em("icon","clear")]:!0})),F=(u,o)=>{c("remove",u,o)},V=u=>{c("focus",u)},b=u=>{c("blur",u)},I=u=>{c("clear",u)};return n.watch(S,u=>{!u&&s.value&&s.value.isSameNode(document.activeElement)&&s.value.blur()}),()=>{var w;const u=()=>{var a,i;return e.loading?((a=l["loading-icon"])==null?void 0:a.call(l))??n.createVNode(r.Loading,null,null):e.allowSearch&&e.opened?((i=l["search-icon"])==null?void 0:i.call(l))??n.createVNode(r.Search,null,null):l["arrow-icon"]?l["arrow-icon"]():n.createVNode(r.ArrowDown,null,null)},o=()=>{let a;return n.createVNode(n.Fragment,null,[C.value&&n.createVNode(g.TuIcon,{class:T.value,onClick:I,onMousedown:i=>i.stopPropagation()},{default:()=>[n.createVNode(r.Close,null,null)]}),n.createVNode(g.TuIcon,{class:t.e("icon")},_(a=u())?a:{default:()=>[a]})])};return e.multiple?n.createVNode(R.TuInputTag,{ref:d,class:v.value,"model-value":e.modelValue,"input-value":e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:f.value,size:m.value,maxTagCount:e.maxTagCount,disabledInput:!e.allowSearch&&!e.allowCreate,"retain-input-value":!0,"uninject-form-item-context":!0,onRemove:F,onFocus:V,onBlur:b},{prefix:l.prefix,suffix:o,tag:l.label}):n.createVNode(p.TuInputLabel,{ref:d,class:v.value,"model-value":(w=e.modelValue)==null?void 0:w[0],"input-value":e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:f.value,size:m.value,"enabled-input":q.value,"uninject-form-item-context":!0,onFocus:V,onBlur:b},{default:l.label,prefix:l.prefix,suffix:o})}}});exports.default=y;
