"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),x=require("@tu-view-plus/hooks"),v=require("@tu-view-plus/utils"),ee=require("@tu-view-plus/constants"),F=require("./range-picker-dropdown.js"),re=require("./utils.js"),g=require("./dropdown/year/year.vue.js"),z=require("./dropdown/quarter/quarter.vue.js"),b=require("./dropdown/month/month.vue.js"),D=require("./dropdown/week/week.vue.js"),M=require("./dropdown/date/date.vue.js"),B=require("./dropdown/shortcuts.vue.js"),te=require("./dropdown/footer.vue.js"),oe=e.defineComponent({name:"TuRangePickerDropdown"}),ae=e.defineComponent({...oe,props:F.rangePickerDropdownProps,emits:F.rangePickerDropdownEmits,setup(R,{emit:H}){const L=R,t=H,c=x.useNamespace("picker"),{shortcuts:y,shortcutsPosition:k,format:O,hideTrigger:w,value:d,disabledDate:n,disabledTime:l,startHeaderProps:W,endHeaderProps:$,dateRender:u,visible:I,startHeaderMode:m,endHeaderMode:p}=e.toRefs(L),f=e.computed(()=>v.isArray(y.value)&&y.value.length),P=e.ref("date"),T=e.computed(()=>({[c.e("range-dropdown")]:!0,[c.em("range-dropdown","dropdown-only")]:w==null?void 0:w.value,[c.em("range-dropdown","shortcuts-placement-left")]:f.value&&k.value==="left",[c.em("range-dropdown","shortcuts-placement-right")]:f.value&&k.value==="right"})),V=r=>v.getDayjsValue(re.normalizeRangeValue(v.isFunction(r.value)?r.value():r.value),r.format||O.value),j=r=>{t("shortcut-click",V(r),r)},U=r=>{t("shortcut-mouse-enter",V(r))},A=r=>{t("shortcut-mouse-leave",V(r))},C=r=>{t("cell-click",r)},S=r=>{t("cell-mouse-enter",r)},G=()=>{t("confirm")},J=r=>{t("time-picker-select",r,"start")},K=r=>{t("time-picker-select",r,"end")},Q=r=>{t("start-header-label-click",r)},X=r=>{t("end-header-label-click",r)},Y=r=>{t("start-header-select",r)},Z=r=>{t("end-header-select",r)},_=r=>v.isFunction(n==null?void 0:n.value)?o=>{var a;return((a=n==null?void 0:n.value)==null?void 0:a.call(n,o,r===0?"start":"end"))||!1}:void 0,E=r=>v.isFunction(l==null?void 0:l.value)?o=>{var a;return((a=l==null?void 0:l.value)==null?void 0:a.call(l,o,r===0?"start":"end"))||!1}:void 0,N=r=>v.isFunction(u==null?void 0:u.value)?o=>{var q;const a={...o,type:r===0?"start":"end"};return(q=u==null?void 0:u.value)==null?void 0:q.call(u,a)}:void 0;e.watch(I,(r,o)=>{r&&!o&&(P.value="date")});const h=e.reactive({shortcuts:y,onItemClick:j,onItemMouseEnter:U,onItemMouseLeave:A}),s=e.computed(()=>({...W.value,rangeValues:d.value,disabledDate:_(0),dateRender:N(0),onSelect:m!=null&&m.value?Y:C,onCellMouseEnter:S,onHeaderLabelClick:Q})),i=e.computed(()=>({...$.value,rangeValues:d.value,disabledDate:_(1),dateRender:N(1),onSelect:p!=null&&p.value?Z:C,onCellMouseEnter:S,onHeaderLabelClick:X}));return(r,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(T.value)},[f.value&&e.unref(k)==="left"?(e.openBlock(),e.createBlock(B.default,e.normalizeProps(e.mergeProps({key:0},h)),null,16)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(c).e("range-dropdown-content"))},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(c).e("range"))},[e.unref(m)||e.unref(p)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(m)==="year"?(e.openBlock(),e.createBlock(g.default,e.normalizeProps(e.mergeProps({key:0},s.value)),null,16)):e.createCommentVNode("",!0),e.unref(p)==="year"?(e.openBlock(),e.createBlock(g.default,e.normalizeProps(e.mergeProps({key:1},i.value)),null,16)):e.unref(m)==="month"?(e.openBlock(),e.createBlock(b.default,e.mergeProps({key:2},s.value,{abbreviation:r.abbreviation}),null,16,["abbreviation"])):e.unref(p)==="month"?(e.openBlock(),e.createBlock(b.default,e.mergeProps({key:3},i.value,{abbreviation:r.abbreviation}),null,16,["abbreviation"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[r.mode==="week"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(D.default,e.mergeProps(s.value,{"day-start-of-week":r.dayStartOfWeek}),null,16,["day-start-of-week"]),e.createVNode(D.default,e.mergeProps(i.value,{"day-start-of-week":r.dayStartOfWeek}),null,16,["day-start-of-week"])],64)):r.mode==="month"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(b.default,e.mergeProps(s.value,{abbreviation:r.abbreviation}),null,16,["abbreviation"]),e.createVNode(b.default,e.mergeProps(i.value,{abbreviation:r.abbreviation}),null,16,["abbreviation"])],64)):r.mode==="year"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createVNode(g.default,e.normalizeProps(e.guardReactiveProps(s.value)),null,16),e.createVNode(g.default,e.normalizeProps(e.guardReactiveProps(i.value)),null,16)],64)):r.mode==="quarter"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createVNode(z.default,e.normalizeProps(e.guardReactiveProps(s.value)),null,16),e.createVNode(z.default,e.normalizeProps(e.guardReactiveProps(i.value)),null,16)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[e.createVNode(M.default,e.mergeProps({currentView:P.value,"onUpdate:currentView":o[0]||(o[0]=a=>P.value=a)},s.value,{"is-range":"",value:e.unref(d)&&e.unref(d)[0],"footer-value":r.footerValue&&r.footerValue[0],"time-picker-value":r.timePickerValue&&r.timePickerValue[0],"day-start-of-week":r.dayStartOfWeek,"show-time":r.showTime,"time-picker-props":r.timePickerProps,"disabled-time":E(0),disabled:r.disabled[0],onTimePickerSelect:J}),null,16,["currentView","value","footer-value","time-picker-value","day-start-of-week","show-time","time-picker-props","disabled-time","disabled"]),e.createVNode(M.default,e.mergeProps({currentView:P.value,"onUpdate:currentView":o[1]||(o[1]=a=>P.value=a)},i.value,{"is-range":"",value:e.unref(d)&&e.unref(d)[1],"footer-value":r.footerValue&&r.footerValue[1],"time-picker-value":r.timePickerValue&&r.timePickerValue[1],"day-start-of-week":r.dayStartOfWeek,"show-time":r.showTime,"time-picker-props":r.timePickerProps,"disabled-time":E(1),disabled:r.disabled[1],onTimePickerSelect:K}),null,16,["currentView","value","footer-value","time-picker-value","day-start-of-week","show-time","time-picker-props","disabled-time","disabled"])],64))],64))],2),e.createVNode(te.default,{"show-today-btn":!1,"show-confirm-btn":r.showConfirmBtn,"confirm-btn-disabled":r.confirmBtnDisabled,onConfirmBtnClick:G},e.createSlots({_:2},[r.extra||r.$slots.extra?{name:"extra",fn:e.withCtx(()=>[r.$slots.extra?e.renderSlot(r.$slots,"extra",{key:0}):(e.openBlock(),e.createBlock(e.unref(ee.RenderFunction),{key:1,"render-func":r.extra},null,8,["render-func"]))]),key:"0"}:void 0,f.value&&e.unref(k)==="bottom"?{name:"button",fn:e.withCtx(()=>[e.createVNode(B.default,e.normalizeProps(e.guardReactiveProps(h)),null,16)]),key:"1"}:void 0]),1032,["show-confirm-btn","confirm-btn-disabled"])],2),f.value&&e.unref(k)==="right"?(e.openBlock(),e.createBlock(B.default,e.normalizeProps(e.mergeProps({key:1},h)),null,16)):e.createCommentVNode("",!0)],2))}});exports.default=ae;
