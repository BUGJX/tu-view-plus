"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue"),s=require("@tu-view-plus/utils"),X=require("./use-panel-span.js"),P=require("./use-header-value.js");function Z(k){const{startHeaderMode:E,endHeaderMode:q,mode:c,value:i,defaultValue:p,selectedValue:f,format:V,onChange:u}=a.toRefs(k),n=a.computed(()=>["date","week"].includes(c.value)),v=a.computed(()=>n.value?"M":"y"),m=(e,t)=>e.isSame(t,v.value),{span:H,superSpan:N}=X.usePanelSpan(a.reactive({mode:c})),j=a.computed(()=>{var e;return(e=i.value)==null?void 0:e[0]}),B=a.computed(()=>{var e;return(e=i.value)==null?void 0:e[1]}),R=a.computed(()=>{var e;return(e=p.value)==null?void 0:e[0]}),b=a.computed(()=>{var e;return(e=p.value)==null?void 0:e[1]}),S=e=>{u!=null&&u.value&&u.value(e)},{headerValue:d,setHeaderValue:h,headerOperations:A,getDefaultLocalValue:F}=P.useHeaderValue(a.reactive({mode:E||c,value:j,defaultValue:R,selectedValue:void 0,format:V,onChange:e=>{S([e,o.value])}})),{headerValue:o,setHeaderValue:g,headerOperations:L,getDefaultLocalValue:T}=P.useHeaderValue(a.reactive({mode:q||c,value:B,defaultValue:b,selectedValue:void 0,format:V,onChange:e=>{S([d.value,e])}})),O=e=>{const t=m(d.value,e[0]),l=m(o.value,e[1]);h(e[0],!1),g(e[1],!1),(!t||!l)&&u!=null&&u.value&&(u==null||u.value(e))};function D(e){let[t,l]=s.getSortedDayjsArray(e);const r=s.methods.add(t,H.value,"M");return l.isBefore(r,v.value)&&(l=r),[t,l]}function M(){var l,r;let e=(l=f.value)==null?void 0:l[0],t=(r=f.value)==null?void 0:r[1];return e&&t&&([e,t]=s.getSortedDayjsArray([e,t])),[e,t]}const[W,Y]=M(),[z,G]=D([W||d.value,Y||o.value]);h(z,!1),g(G,!1);const I=()=>{const e=F(),t=T();a.nextTick(()=>{const[l,r]=M(),[Q,U]=D([l||e,r||t]);O([Q,U])})},x=a.computed(()=>s.methods.add(d.value,H.value,"M").isBefore(o.value,v.value)),y=a.computed(()=>s.methods.add(d.value,N.value,"M").isBefore(o.value,v.value)),J=a.computed(()=>{const e=["onSuperPrev"];return n.value&&e.push("onPrev"),x.value&&n&&e.push("onNext"),y.value&&e.push("onSuperNext"),s.pick(A.value,e)}),K=a.computed(()=>{const e=["onSuperNext"];return n.value&&e.push("onNext"),x.value&&n.value&&e.push("onPrev"),y.value&&e.push("onSuperPrev"),s.pick(L.value,e)});return{startHeaderValue:d,endHeaderValue:o,startHeaderOperations:J,endHeaderOperations:K,setHeaderValue:O,resetHeaderValue:I}}exports.useRangeHeaderValue=Z;
