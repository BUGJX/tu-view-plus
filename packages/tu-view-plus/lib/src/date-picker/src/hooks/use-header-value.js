"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),a=require("@tu-view-plus/utils"),j=require("./use-panel-span.js");function q(P){const{mode:c,value:n,defaultValue:d,selectedValue:u,format:S,onChange:s}=t.toRefs(P),i=t.computed(()=>(c==null?void 0:c.value)||"date"),{span:p,superSpan:m}=j.usePanelSpan(t.reactive({mode:i})),b=(e,r)=>{const v=i.value==="date"||i.value==="week"?"M":"y";return e.isSame(r,v)},D=t.computed(()=>a.getDayjsValue(n==null?void 0:n.value,S.value)),M=t.computed(()=>a.getDayjsValue(d==null?void 0:d.value,S.value)),g=t.ref(M.value||a.getNow()),l=t.computed(()=>D.value||g.value),f=e=>{e&&(g.value=e)},o=(e,r=!0)=>{var v;e&&(r&&!b(l.value,e)&&((v=s==null?void 0:s.value)==null||v.call(s,e)),f(e))};u!=null&&u.value&&f(u.value),t.watch(()=>u==null?void 0:u.value,e=>{o(e)});function h(){return(u==null?void 0:u.value)||M.value||a.getNow()}function H(e=!0){const r=h();e?o(r):f(r)}const y=t.computed(()=>p.value!==m.value),N=t.computed(()=>({onSuperPrev:()=>{o(a.methods.subtract(l.value,m.value,"M"))},onPrev:y.value?()=>{o(a.methods.subtract(l.value,p.value,"M"))}:void 0,onNext:y.value?()=>{o(a.methods.add(l.value,p.value,"M"))}:void 0,onSuperNext:()=>{o(a.methods.add(l.value,m.value,"M"))}}));return{headerValue:l,setHeaderValue:o,headerOperations:N,resetHeaderValue:H,getDefaultLocalValue:h}}exports.useHeaderValue=q;
