"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),C=require("./picker-dropdown.js"),X=require("@tu-view-plus/hooks"),Y=require("@tu-view-plus/constants"),i=require("@tu-view-plus/utils"),Z=require("./hooks/use-header-value.js");require("b-tween");const q=require("./dropdown/year/year.vue.js"),$=require("./dropdown/quarter/quarter.vue.js"),V=require("./dropdown/month/month.vue.js"),x=require("./dropdown/week/week.vue.js"),ee=require("./dropdown/date/date.vue.js"),oe=require("./dropdown/shortcuts.vue.js"),te=require("./dropdown/footer.vue.js"),re=e.defineComponent({name:"PickerDropdown"}),ae=e.defineComponent({...re,props:C.pickerDropdownProps,emits:C.pickerDropdownEmits,setup(H,{emit:N}){const M=H,t=N,r=X.useNamespace("picker"),{shortcuts:d,shortcutsPosition:p,format:f,value:u,disabledDate:D,hideTrigger:m,showNowBtn:c,dateRender:E,showConfirmBtn:a,headerValue:_,headerIcons:k,headerOperations:I,headerMode:l}=e.toRefs(M),b=e.computed(()=>!!(d.value&&d.value.length)),y=e.computed(()=>(c==null?void 0:c.value)&&(a==null?void 0:a.value)&&!b.value),h=e.computed(()=>y.value||b.value),L=e.computed(()=>h.value&&p.value==="left"),O=e.computed(()=>h.value&&p.value==="right"),z=e.computed(()=>(u==null?void 0:u.value)||i.getNow()),w=e.computed(()=>h.value&&p.value==="bottom"),R=e.computed(()=>({[r.e("dropdown")]:!0,[r.em("dropdown","dropdown-only")]:m==null?void 0:m.value,[r.em("dropdown","shortcuts-placement-left")]:L.value,[r.em("dropdown","shortcuts-placement-right")]:O.value})),{headerValue:B,setHeaderValue:F,headerOperations:P}=Z.useHeaderValue(e.reactive({mode:l,format:f})),T=o=>{t("cell-click",o)},j=o=>{t("header-label-click",o)},W=o=>{t("time-picker-select",o)},g=o=>{t("header-select",o)},A=()=>{t("month-header-click")},S=()=>{t("today-btn-click",i.getNow())},G=()=>{t("confirm")},v=o=>{const{value:s}=o;return i.getDayjsValue(i.isFunction(s)?s():s,o.format||f.value)},J=o=>{t("shortcut-click",v(o),o)},K=o=>{t("shortcut-mouse-enter",v(o))},Q=o=>{t("shortcut-mouse-leave",v(o))},n=e.reactive({value:u,headerValue:_,headerIcons:k,headerOperations:I,disabledDate:D,dateRender:E,onSelect:T,onHeaderLabelClick:j}),U=e.reactive({shortcuts:d,showNowBtn:y,onItemClick:J,onItemMouseEnter:K,onItemMouseLeave:Q,onNowClick:S});return e.watch(_,o=>{F(o)}),(o,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(R.value)},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(r).e("dropdown-content"))},[e.unref(l)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(l)==="year"?(e.openBlock(),e.createBlock(q.default,{key:0,"header-value":e.unref(B),"header-icons":e.unref(k),"header-operations":e.unref(P),onSelect:g},null,8,["header-value","header-icons","header-operations"])):e.unref(l)==="month"?(e.openBlock(),e.createBlock(V.default,{key:1,"header-value":e.unref(B),"header-icons":e.unref(k),"header-operations":e.unref(P),abbreviation:o.abbreviation,onSelect:g,onHeaderLabelClick:A},null,8,["header-value","header-icons","header-operations","abbreviation"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o.mode==="week"?(e.openBlock(),e.createBlock(x.default,e.mergeProps({key:0},n,{"day-start-of-week":o.dayStartOfWeek}),null,16,["day-start-of-week"])):o.mode==="month"?(e.openBlock(),e.createBlock(V.default,e.mergeProps({key:1,abbreviation:o.abbreviation},n),null,16,["abbreviation"])):o.mode==="year"?(e.openBlock(),e.createBlock(q.default,e.normalizeProps(e.mergeProps({key:2},n)),null,16)):o.mode==="quarter"?(e.openBlock(),e.createBlock($.default,e.normalizeProps(e.mergeProps({key:3},n)),null,16)):(e.openBlock(),e.createBlock(ee.default,e.mergeProps({key:4},n,{mode:"date","show-time":o.showTime,"time-picker-props":o.timePickerProps,"day-start-of-week":o.dayStartOfWeek,"footer-value":z.value,"time-picker-value":o.timePickerValue,"disabled-time":o.disabledTime,onTimePickerSelect:W}),null,16,["show-time","time-picker-props","day-start-of-week","footer-value","time-picker-value","disabled-time"])),e.createVNode(te.default,{"show-today-btn":e.unref(c)&&!(e.unref(a)||w.value),"show-confirm-btn":e.unref(a),"confirm-btn-disabled":o.confirmBtnDisabled,onTodayBtnClick:S,onConfirmBtnClick:G},e.createSlots({_:2},[o.extra?{name:"extra",fn:e.withCtx(()=>[o.extra?(e.openBlock(),e.createBlock(e.unref(Y.RenderFunction),{key:0,"render-func":o.extra},null,8,["render-func"])):e.createCommentVNode("",!0)]),key:"0"}:void 0,w.value?{name:"button",fn:e.withCtx(()=>[e.createVNode(oe.default,e.normalizeProps(e.guardReactiveProps(U)),null,16)]),key:"1"}:void 0]),1032,["show-today-btn","show-confirm-btn","confirm-btn-disabled"])],64))],2)],2))}});exports.default=ae;
