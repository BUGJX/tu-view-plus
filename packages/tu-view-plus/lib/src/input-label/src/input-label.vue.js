"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("vue"),L=require("./input-label.js"),z=require("@tu-view-plus/hooks"),C=require("@tu-view-plus/utils"),N=require("@tu-view-plus/constants");require("../../form/index.js");require("../style/input-label.css");const q=require("../../form/src/hooks/use-form-props.js"),B=u.defineComponent({name:"TuInputLabel",props:L.inputLabelProps,emits:L.inputLabelEmits,inheritAttrs:!1,setup(a,{slots:s,emit:i,attrs:m}){let d;const{inputValue:r}=u.toRefs(a),t=z.useNamespace("input-label"),x=q.useFormSize(),b=q.useFormDisabled(),l=u.ref(),c=u.ref(!1),v=u.ref(!1),p=u.ref(""),V=u.ref(""),P=u.computed(()=>C.omit(m,N.INPUT_EVENTS)),T=u.computed(()=>C.pick(m,N.INPUT_EVENTS)),h=u.computed(()=>a.enabledInput&&c.value||!a.modelValue),n=u.computed(()=>(r==null?void 0:r.value)??V.value),w=u.computed(()=>a.enabledInput&&a.modelValue?a.modelValue.label:a.placeholder),F=u.computed(()=>a.focused??c.value),S=u.computed(()=>({[t.b()]:!0,[t.m(x.value)]:!0,[t.is("search")]:a.enabledInput,[t.is("focus")]:F.value,[t.is("disabled")]:b.value})),_=u.computed(()=>({[t.e("input")]:!0,[t.is("hidden")]:!h.value})),E=u.computed(()=>({[t.e("inner")]:!0,[t.is("hidden")]:h.value})),g=()=>{var e;return a.modelValue?((e=a.formatLabel)==null?void 0:e.call(a,a.modelValue))??a.modelValue.label:""},k=e=>{l.value&&e.target!==l.value&&(e.preventDefault(),l.value.focus())},D=e=>{const{value:o}=e.target;v.value||I(o,e),u.nextTick(()=>{l.value&&n.value!==l.value.value&&(l.value.value=n.value)})},M=e=>{c.value=!0,d=n.value,i("focus",e)},y=e=>{c.value=!1,i("blur",e),A(e)},A=e=>{n.value!==d&&(d=n.value,i("change",n.value,e))},f=e=>{const{value:o}=e.target;e.type==="compositionend"?(v.value=!1,p.value="",I(o,e),u.nextTick(()=>{l.value&&n.value!==l.value.value&&(l.value.value=n.value)})):(v.value=!0,p.value=n.value+(e.data??""))},I=(e,o)=>{V.value=e,i("update:modelValue",e),i("input",e,o)};return u.watch(n,e=>{l.value&&e!==l.value.value&&(l.value.value=e)}),()=>{const e=()=>{var o;return a.modelValue?((o=s.default)==null?void 0:o.call(s,{data:a.modelValue}))??g():null};return u.createVNode("div",u.mergeProps({class:S.value,title:g(),onMousedown:k},P.value),[s.prefix&&u.createVNode("span",{class:t.e("prefix")},[s.prefix()]),u.createVNode("input",u.mergeProps({ref:l,class:_.value,value:n.value,readonly:!a.enabledInput,placeholder:w.value,disabled:b.value,onInput:D,onFocus:M,onBlur:y,onCompositionstart:f,onCompositionupdate:f,onCompositionend:f},T.value),null),u.createVNode("span",{class:E.value},[e()]),s.suffix&&u.createVNode("span",{class:t.e("suffix")},[s.suffix()])])}}});exports.default=B;
