"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("vue"),I=require("./input-label.js"),U=require("@tu-view-plus/hooks"),L=require("@tu-view-plus/utils"),N=require("@tu-view-plus/constants");require("../../form/index.js");require("../style/input-label.css");const q=require("../../form/src/hooks/use-form-props.js"),j=u.defineComponent({name:"TuInputLabel",props:I.inputLabelProps,emits:I.inputLabelEmits,inheritAttrs:!1,setup(a,{slots:s,emit:c,attrs:m,expose:x}){let r;const{inputValue:d}=u.toRefs(a),n=U.useNamespace("input-label"),P=q.useFormSize(),b=q.useFormDisabled(),l=u.ref(),i=u.ref(!1),v=u.ref(!1),p=u.ref(""),V=u.ref(""),T=u.computed(()=>L.omit(m,N.INPUT_EVENTS)),w=u.computed(()=>L.pick(m,N.INPUT_EVENTS)),h=u.computed(()=>a.enabledInput&&i.value||!a.modelValue),t=u.computed(()=>(d==null?void 0:d.value)??V.value),F=u.computed(()=>a.enabledInput&&a.modelValue?a.modelValue.label:a.placeholder),S=u.computed(()=>a.focused??i.value),_=u.computed(()=>({[n.b()]:!0,[n.m(P.value)]:!0,[n.is("search")]:a.enabledInput,[n.is("focus")]:S.value,[n.is("disabled")]:b.value})),E=u.computed(()=>({[n.e("input")]:!0,[n.is("hidden")]:!h.value})),k=u.computed(()=>({[n.e("inner")]:!0,[n.is("hidden")]:h.value})),g=()=>{var e;return a.modelValue?((e=a.formatLabel)==null?void 0:e.call(a,a.modelValue))??a.modelValue.label:""},D=e=>{l.value&&e.target!==l.value&&(e.preventDefault(),l.value.focus())},M=e=>{const{value:o}=e.target;v.value||(C(o,e),u.nextTick(()=>{l.value&&t.value!==l.value.value&&(l.value.value=t.value)}))},y=e=>{i.value=!0,r=t.value,c("focus",e)},A=e=>{i.value=!1,c("blur",e),z(e)},z=e=>{t.value!==r&&(r=t.value,c("change",t.value,e))},f=e=>{const{value:o}=e.target;e.type==="compositionend"?(v.value=!1,p.value="",C(o,e),u.nextTick(()=>{l.value&&t.value!==l.value.value&&(l.value.value=t.value)})):(v.value=!0,p.value=t.value+(e.data??""))},C=(e,o)=>{V.value=e,c("update:modelValue",e),c("inputValueChange",e,o)},B=()=>{var e;(e=l.value)==null||e.focus()},R=()=>{var e;(e=l.value)==null||e.blur()};return u.watch(t,e=>{l.value&&e!==l.value.value&&(l.value.value=e)}),x({inputRef:l,focus:B,blur:R}),()=>{const e=()=>{var o;return a.modelValue?((o=s.default)==null?void 0:o.call(s,{data:a.modelValue}))??g():null};return u.createVNode("div",u.mergeProps({class:_.value,title:g(),onMousedown:D},T.value),[s.prefix&&u.createVNode("span",{class:n.e("prefix")},[s.prefix()]),u.createVNode("input",u.mergeProps(w.value,{ref:l,class:E.value,value:t.value,readonly:!a.enabledInput,placeholder:F.value,disabled:b.value,onInput:M,onFocus:y,onBlur:A,onCompositionstart:f,onCompositionupdate:f,onCompositionend:f}),null),u.createVNode("span",{class:k.value},[e()]),s.suffix&&u.createVNode("span",{class:n.e("suffix")},[s.suffix()])])}}});exports.default=j;
