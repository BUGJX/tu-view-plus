"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue"),s=require("@tu-view-plus/utils"),V=require("@tu-view-plus/constants"),A=require("./constants.js");require("../../form/index.js");const v=require("../../form/src/hooks/use-form-item.js"),o=require("../../form/src/hooks/use-form-props.js"),M=(l,f,z)=>{const{emit:g}=a.getCurrentInstance(),E=a.ref(!1),r=a.ref(!1),m=a.ref(!1),{formItem:i}=v.useFormItem(),t=a.inject(A.checkboxGroupContextKey,void 0),c=a.computed(()=>!s.isUndefined(t)),y=a.computed(()=>!1),I=o.useFormSize(a.computed(()=>{var e;return(e=t==null?void 0:t.size)==null?void 0:e.value})),L=a.computed(()=>{var e;return((e=t==null?void 0:t.type)==null?void 0:e.value)||l.type}),q=o.useFormDisabled(a.computed(()=>{var e;return((e=t==null?void 0:t.disabled)==null?void 0:e.value)||y.value})),{inputId:C}=v.useFormItemInputId(l,{formItemContext:i,disableIdManagement:c}),b=a.computed(()=>(t==null?void 0:t.validateEvent)||l.validateEvent),n=a.computed({get(){var e;return c.value?(e=t==null?void 0:t.modelValue)==null?void 0:e.value:l.modelValue??m.value},set(e){var d,u;c.value&&s.isArray(e)?(r.value=((d=t==null?void 0:t.max)==null?void 0:d.value)!==void 0&&e.length>(t==null?void 0:t.max.value),r.value===!1&&((u=t==null?void 0:t.changeEvent)==null||u.call(t,e))):(g(V.UPDATE_MODEL_EVENT,e),m.value=e)}}),F=a.computed(()=>{const e=n.value;return s.isBoolean(e)?e:s.isArray(e)?e.indexOf(l.label)>-1:e!=null?e===l.trueLabel:!!e}),D=()=>{s.isArray(n.value)&&!n.value.includes(l.label)?n.value.push(l.label):n.value=l.trueLabel||!0},S=e=>e===l.trueLabel||e===!0?l.trueLabel??!0:l.falseLabel??!1,T=e=>{var u;if(r.value)return;const d=(u=e.target)==null?void 0:u.checked;f("change",S(d))};return a.watch(()=>l.modelValue,()=>{b.value&&(i==null||i.validate("change").catch(e=>s.debugWarn(e)))}),{inputId:C,model:n,checkboxDisabled:q,checkboxSize:I,checkboxType:L,isChecked:F,isFocused:E,handleChange:T,addToStore:D}};exports.useCheckbox=M;
