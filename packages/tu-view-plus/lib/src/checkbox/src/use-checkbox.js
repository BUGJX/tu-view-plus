"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vue"),i=require("@tu-view-plus/utils"),M=require("@tu-view-plus/constants"),U=require("./constants.js");require("../../form/index.js");const o=require("../../form/src/hooks/use-form-item.js"),g=require("../../form/src/hooks/use-form-props.js"),z=(n,E)=>{const{emit:y}=a.getCurrentInstance(),I=a.ref(!1),m=a.ref(!1),c=a.ref(!1),v=a.computed(()=>!i.isUndefined(t)),{formItem:d}=o.useFormItem(),{inputId:L}=o.useFormItemInputId(n,{formItemContext:d,disableIdManagement:v}),t=a.inject(U.checkboxGroupContextKey,void 0),l=a.computed({get(){var e;return v.value?(e=t==null?void 0:t.modelValue)==null?void 0:e.value:n.modelValue??c.value},set(e){var u,s;v.value&&i.isArray(e)?(m.value=((u=t==null?void 0:t.max)==null?void 0:u.value)!==void 0&&e.length>(t==null?void 0:t.max.value),m.value===!1&&((s=t==null?void 0:t.changeEvent)==null||s.call(t,e))):(y(M.UPDATE_MODEL_EVENT,e),c.value=e)}}),q=a.computed(()=>{var s,f;const e=(s=t==null?void 0:t.max)==null?void 0:s.value,u=(f=t==null?void 0:t.min)==null?void 0:f.value;return!i.isUndefined(e)&&l.value.length>=e&&!r.value||!i.isUndefined(u)&&l.value.length<=u&&r.value}),C=g.useFormSize(a.computed(()=>{var e;return(e=t==null?void 0:t.size)==null?void 0:e.value})),F=a.computed(()=>{var e;return((e=t==null?void 0:t.type)==null?void 0:e.value)||n.type}),D=g.useFormDisabled(a.computed(()=>{var e;return((e=t==null?void 0:t.disabled)==null?void 0:e.value)||!!q.value})),r=a.computed(()=>{const e=l.value;return i.isBoolean(e)?e:i.isArray(e)?e.indexOf(n.label)>-1:e!=null?e===n.trueLabel:!!e}),S=a.computed(()=>(t==null?void 0:t.validateEvent)||n.validateEvent),T=()=>{i.isArray(l.value)&&!l.value.includes(n.label)?l.value.push(n.label):l.value=n.trueLabel||!0},V=e=>e===n.trueLabel||e===!0?n.trueLabel??!0:n.falseLabel??!1,A=e=>{var s;if(m.value)return;const u=(s=e.target)==null?void 0:s.checked;E("change",V(u))};return a.watch(()=>n.modelValue,()=>{S.value&&(d==null||d.validate("change").catch(e=>i.debugWarn(e)))}),{checkboxGroup:t,inputId:L,model:l,checkboxDisabled:D,checkboxSize:C,checkboxType:F,isChecked:r,isFocused:I,handleChange:A,addToStore:T}};exports.useCheckbox=z;
